(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["LiveFace"],{"0d26":function(e,t,r){"use strict";var n=r("e330"),a=Error,c=n("".replace),o=function(e){return String(new a(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,s=i.test(o);e.exports=function(e,t){if(s&&"string"==typeof e&&!a.prepareStackTrace)while(t--)e=c(e,i,"");return e}},1787:function(e,t,r){"use strict";var n=r("861d");e.exports=function(e){return n(e)||null===e}},"1b20":function(e,t,r){"use strict";r.r(t);r("d9e2"),r("e9f5"),r("7d54"),r("88a7"),r("271a"),r("5494");var n=r("7a23");const a={class:"video-wrapper"},c={class:"canvas-wrap"},o={id:"imgTip"},i={class:"pic-wrap"},s={id:"imgView"},u=["src"],d={id:"errorTip"},l={id:"device",style:{"text-align":"center"}};var f=Object(n["defineComponent"])({__name:"Index",setup(e){const t=Object(n["reactive"])({errorTip:"",imgTip:"正在检测人脸……",deviceText:"",videoSrc:"",streamIns:null,tipFlag:0,flag:0,streamClosed:!1,imageSrc:"",tracker:null}),r=e=>{const t=document.createElement("script");return t.src=e,document.body.appendChild(t),new Promise(e=>{t.onload=function(){e()}})},f=e=>{t.streamIns=e;const r=window.URL||window.webkitURL,n=document.getElementById("video");try{n.src=r.createObjectURL(e),n.play()}catch(a){n.srcObject=e}},p=e=>{throw t.errorTip="访问用户媒体设备失败："+e,new Error("访问用户媒体设备失败："+e.name+e.message)},v=(e,t,r)=>{navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(t).catch(r):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e).then(t).catch(r):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e).then(t).catch(r):navigator.getUserMedia&&navigator.getUserMedia(e).then(t).catch(r)},b=()=>{navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?v({video:{width:1920,height:1080,facingMode:"user"}},f,p):(t.errorTip="你的浏览器不支持访问用户媒体设备",alert("你的浏览器不支持访问用户媒体设备"))},g=e=>{const r=document.getElementById("canvas"),n=r.getContext("2d"),a=document.getElementById("video");document.getElementById("imgView");window.plot=function({x:e,y:r,width:n,height:c}){const o=document.createElement("div");document.querySelector(".face-wrap").appendChild(o),o.classList.add("rect"),o.style.width=n+"px",o.style.height=c+"px",o.style.left=a.offsetLeft+e+"px",o.style.top=a.offsetTop+r+"px",t.deviceText="x:"+e+"y:"+r+"h:"+c+"w:"+n},0===e.data.length?console.log("没有检测到人脸"):(t.tipFlag||(t.imgTip="检测人脸成功，正在拍照，请保持不动2秒！"),t.flag||(t.flag=1,setTimeout(()=>{n.drawImage(a,0,0,480,320);r.toDataURL("image/png");t.imageSrc=r.toDataURL("image/png"),t.imgTip="拍照完成！",t.tipFlag=1,m()},1e3)),e.data.forEach(window.plot))},h=()=>{t.tracker=new window.tracking.ObjectTracker(["face"]),t.tracker.setStepSize(1.7),t.tracker.on("track",g),window.tracking.track("#video",t.tracker);const e=1e3;setTimeout(()=>{},60*e)},m=()=>{t.errorTip="移除追踪",t.tracker.removeListener("track",g)},y=async()=>{await r("https://cdn.jsdelivr.net/gh/eduardolundgren/tracking.js/build/tracking-min.js"),await r("https://cdn.jsdelivr.net/gh/eduardolundgren/tracking.js/build/data/face-min.js"),b(),h()},w=()=>{t.errorTip="我点击了关闭；视频流对象："+t.streamIns;try{t.streamIns.enabled=!1,t.streamIns.getTracks()[0].stop(),t.streamIns.getVideoTracks()[0].stop(),t.streamClosed=!0}catch(e){throw new Error(e)}},k=()=>{window.location.reload()};return y(),(e,r)=>{const f=Object(n["resolveComponent"])("el-button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[r[7]||(r[7]=Object(n["createElementVNode"])("div",{class:"face-wrap"},[Object(n["createElementVNode"])("video",{id:"video",autoplay:"",style:{width:"480px",height:"320px"}})],-1)),Object(n["createElementVNode"])("div",c,[r[2]||(r[2]=Object(n["createElementVNode"])("h1",null,"Canvas Info",-1)),r[3]||(r[3]=Object(n["createElementVNode"])("canvas",{id:"canvas",width:"480",height:"320"},null,-1)),Object(n["createElementVNode"])("div",o,Object(n["toDisplayString"])(t.imgTip),1),t.streamClosed?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:0,type:"default",onClick:w},{default:Object(n["withCtx"])(()=>r[0]||(r[0]=[Object(n["createTextVNode"])("关闭摄像头")])),_:1})),t.streamClosed?(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:1,onClick:k},{default:Object(n["withCtx"])(()=>r[1]||(r[1]=[Object(n["createTextVNode"])("打开摄像头")])),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",i,[r[4]||(r[4]=Object(n["createElementVNode"])("h1",null,"Img Info",-1)),Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("img",{src:t.imageSrc,alt:""},null,8,u)]),r[5]||(r[5]=Object(n["createElementVNode"])("h1",null,"Error Info",-1)),Object(n["createElementVNode"])("div",d,Object(n["toDisplayString"])(t.errorTip),1),r[6]||(r[6]=Object(n["createElementVNode"])("h1",null,"Device Info",-1)),Object(n["createElementVNode"])("div",l,Object(n["toDisplayString"])(t.deviceText),1)])])}}}),p=(r("bc12"),r("6b0d")),v=r.n(p);const b=v()(f,[["__scopeId","data-v-7520fd3f"]]);t["default"]=b},"271a":function(e,t,r){"use strict";var n=r("cb2d"),a=r("e330"),c=r("577e"),o=r("d6d6"),i=URLSearchParams,s=i.prototype,u=a(s.getAll),d=a(s.has),l=new i("a=1");!l.has("a",2)&&l.has("a",void 0)||n(s,"has",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return d(this,e);var n=u(this,e);o(t,1);var a=c(r),i=0;while(i<n.length)if(n[i++]===a)return!0;return!1}),{enumerable:!0,unsafe:!0})},"2ba4":function(e,t,r){"use strict";var n=r("40d5"),a=Function.prototype,c=a.apply,o=a.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(c):function(){return o.apply(c,arguments)})},"3bbe":function(e,t,r){"use strict";var n=r("1787"),a=String,c=TypeError;e.exports=function(e){if(n(e))return e;throw new c("Can't set "+a(e)+" as a prototype")}},"3c80":function(e,t,r){},5494:function(e,t,r){"use strict";var n=r("83ab"),a=r("e330"),c=r("edd0"),o=URLSearchParams.prototype,i=a(o.forEach);n&&!("size"in o)&&c(o,"size",{get:function(){var e=0;return i(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"577e":function(e,t,r){"use strict";var n=r("f5df"),a=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return a(e)}},"6f19":function(e,t,r){"use strict";var n=r("9112"),a=r("0d26"),c=r("b980"),o=Error.captureStackTrace;e.exports=function(e,t,r,i){c&&(o?o(e,t):n(e,"stack",a(r,i)))}},7156:function(e,t,r){"use strict";var n=r("1626"),a=r("861d"),c=r("d2bb");e.exports=function(e,t,r){var o,i;return c&&n(o=t.constructor)&&o!==r&&a(i=o.prototype)&&i!==r.prototype&&c(e,i),e}},7282:function(e,t,r){"use strict";var n=r("e330"),a=r("59ed");e.exports=function(e,t,r){try{return n(a(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(c){}}},"88a7":function(e,t,r){"use strict";var n=r("cb2d"),a=r("e330"),c=r("577e"),o=r("d6d6"),i=URLSearchParams,s=i.prototype,u=a(s.append),d=a(s["delete"]),l=a(s.forEach),f=a([].push),p=new i("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&n(s,"delete",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return d(this,e);var n=[];l(this,(function(e,t){f(n,{key:t,value:e})})),o(t,1);var a,i=c(e),s=c(r),p=0,v=0,b=!1,g=n.length;while(p<g)a=n[p++],b||a.key===i?(b=!0,d(this,a.key)):v++;while(v<g)a=n[v++],a.key===i&&a.value===s||u(this,a.key,a.value)}),{enumerable:!0,unsafe:!0})},ab36:function(e,t,r){"use strict";var n=r("861d"),a=r("9112");e.exports=function(e,t){n(t)&&"cause"in t&&a(e,"cause",t.cause)}},aeb0:function(e,t,r){"use strict";var n=r("9bf2").f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},b980:function(e,t,r){"use strict";var n=r("d039"),a=r("5c6c");e.exports=!n((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},bc12:function(e,t,r){"use strict";r("3c80")},d2bb:function(e,t,r){"use strict";var n=r("7282"),a=r("861d"),c=r("1d80"),o=r("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=n(Object.prototype,"__proto__","set"),e(r,[]),t=r instanceof Array}catch(i){}return function(r,n){return c(r),o(n),a(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},d6d6:function(e,t,r){"use strict";var n=TypeError;e.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},d9e2:function(e,t,r){"use strict";var n=r("23e7"),a=r("cfe9"),c=r("2ba4"),o=r("e5cb"),i="WebAssembly",s=a[i],u=7!==new Error("e",{cause:7}).cause,d=function(e,t){var r={};r[e]=o(e,t,u),n({global:!0,constructor:!0,arity:1,forced:u},r)},l=function(e,t){if(s&&s[e]){var r={};r[e]=o(i+"."+e,t,u),n({target:i,stat:!0,constructor:!0,arity:1,forced:u},r)}};d("Error",(function(e){return function(t){return c(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return c(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return c(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return c(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return c(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return c(e,this,arguments)}})),d("URIError",(function(e){return function(t){return c(e,this,arguments)}})),l("CompileError",(function(e){return function(t){return c(e,this,arguments)}})),l("LinkError",(function(e){return function(t){return c(e,this,arguments)}})),l("RuntimeError",(function(e){return function(t){return c(e,this,arguments)}}))},e391:function(e,t,r){"use strict";var n=r("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},e5cb:function(e,t,r){"use strict";var n=r("d066"),a=r("1a2db"),c=r("9112"),o=r("3a9b"),i=r("d2bb"),s=r("e893"),u=r("aeb0"),d=r("7156"),l=r("e391"),f=r("ab36"),p=r("6f19"),v=r("83ab"),b=r("c430");e.exports=function(e,t,r,g){var h="stackTraceLimit",m=g?2:1,y=e.split("."),w=y[y.length-1],k=n.apply(null,y);if(k){var E=k.prototype;if(!b&&a(E,"cause")&&delete E.cause,!r)return k;var j=n("Error"),O=t((function(e,t){var r=l(g?t:e,void 0),n=g?new k(e):new k;return void 0!==r&&c(n,"message",r),p(n,O,n.stack,2),this&&o(E,this)&&d(n,this,O),arguments.length>m&&f(n,arguments[m]),n}));if(O.prototype=E,"Error"!==w?i?i(O,j):s(O,j,{name:!0}):v&&h in k&&(u(O,k,h),u(O,k,"prepareStackTrace")),s(O,k),!b)try{E.name!==w&&c(E,"name",w),E.constructor=O}catch(x){}return O}}}}]);