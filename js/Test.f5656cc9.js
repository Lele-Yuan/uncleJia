(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["Test"],{"60e2":function(t,e,n){"use strict";n("d65c")},c9a5:function(t,e,n){"use strict";n.r(e);var i=n("7a23");function o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}var s=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},h=function(t){return Object(s(t))},a={}.hasOwnProperty,l=function(t,e){return a.call(t,e)},u=r((function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)})),c=(u.version,r((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}))),f=!0,d=r((function(t){var e="__core-js_shared__",n=c[e]||(c[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:u.version,mode:f?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})})),g=0,p=Math.random(),v=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++g+p).toString(36))},y=d("keys"),m=function(t){return y[t]||(y[t]=v(t))},w=m("IE_PROTO"),x=Object.prototype,k=Object.getPrototypeOf||function(t){return t=h(t),l(t,w)?t[w]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?x:null},b=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},E=function(t,e,n){if(b(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},T=function(t){return"object"===typeof t?null!==t:"function"===typeof t},S=function(t){if(!T(t))throw TypeError(t+" is not an object!");return t},N=function(t){try{return!!t()}catch(e){return!0}},O=!N((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),R=c.document,M=T(R)&&T(R.createElement),_=function(t){return M?R.createElement(t):{}},C=!O&&!N((function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a})),L=function(t,e){if(!T(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!T(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!T(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!T(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},I=Object.defineProperty,P=O?Object.defineProperty:function(t,e,n){if(S(t),e=L(e,!0),S(n),C)try{return I(t,e,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},A={f:P},H=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},j=O?function(t,e,n){return A.f(t,e,H(1,n))}:function(t,e,n){return t[e]=n,t},B="prototype",D=function(t,e,n){var i,o,r,s=t&D.F,h=t&D.G,a=t&D.S,f=t&D.P,d=t&D.B,g=t&D.W,p=h?u:u[e]||(u[e]={}),v=p[B],y=h?c:a?c[e]:(c[e]||{})[B];for(i in h&&(n=e),n)o=!s&&y&&void 0!==y[i],o&&l(p,i)||(r=o?y[i]:n[i],p[i]=h&&"function"!=typeof y[i]?n[i]:d&&o?E(r,c):g&&y[i]==r?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[B]=t[B],e}(r):f&&"function"==typeof r?E(Function.call,r):r,f&&((p.virtual||(p.virtual={}))[i]=r,t&D.R&&v&&!v[i]&&j(v,i,r)))};D.F=1,D.G=2,D.S=4,D.P=8,D.B=16,D.W=32,D.U=64,D.R=128;var F=D,G=function(t,e){var n=(u.Object||{})[t]||Object[t],i={};i[t]=e(n),F(F.S+F.F*N((function(){n(1)})),"Object",i)};G("getPrototypeOf",(function(){return function(t){return k(h(t))}}));var V=u.Object.getPrototypeOf,z=r((function(t){t.exports={default:V,__esModule:!0}})),U=o(z),W=r((function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}})),K=o(W);F(F.S+F.F*!O,"Object",{defineProperty:A.f});var $=u.Object,q=function(t,e,n){return $.defineProperty(t,e,n)},Y=r((function(t){t.exports={default:q,__esModule:!0}}));o(Y);var J=r((function(t,e){e.__esModule=!0;var n=i(Y);function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(t,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()})),X=o(J),Q=Math.ceil,Z=Math.floor,tt=function(t){return isNaN(t=+t)?0:(t>0?Z:Q)(t)},et=function(t){return function(e,n){var i,o,r=String(s(e)),h=tt(n),a=r.length;return h<0||h>=a?t?"":void 0:(i=r.charCodeAt(h),i<55296||i>56319||h+1===a||(o=r.charCodeAt(h+1))<56320||o>57343?t?r.charAt(h):i:t?r.slice(h,h+2):o-56320+(i-55296<<10)+65536)}},nt=j,it={},ot={}.toString,rt=function(t){return ot.call(t).slice(8,-1)},st=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==rt(t)?t.split(""):Object(t)},ht=function(t){return st(s(t))},at=Math.min,lt=function(t){return t>0?at(tt(t),9007199254740991):0},ut=Math.max,ct=Math.min,ft=function(t,e){return t=tt(t),t<0?ut(t+e,0):ct(t,e)},dt=function(t){return function(e,n,i){var o,r=ht(e),s=lt(r.length),h=ft(i,s);if(t&&n!=n){while(s>h)if(o=r[h++],o!=o)return!0}else for(;s>h;h++)if((t||h in r)&&r[h]===n)return t||h||0;return!t&&-1}},gt=dt(!1),pt=m("IE_PROTO"),vt=function(t,e){var n,i=ht(t),o=0,r=[];for(n in i)n!=pt&&l(i,n)&&r.push(n);while(e.length>o)l(i,n=e[o++])&&(~gt(r,n)||r.push(n));return r},yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),mt=Object.keys||function(t){return vt(t,yt)},wt=O?Object.defineProperties:function(t,e){S(t);var n,i=mt(e),o=i.length,r=0;while(o>r)A.f(t,n=i[r++],e[n]);return t},xt=c.document,kt=xt&&xt.documentElement,bt=m("IE_PROTO"),Et=function(){},Tt="prototype",St=function(){var t,e=_("iframe"),n=yt.length,i="<",o=">";e.style.display="none",kt.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+o+"document.F=Object"+i+"/script"+o),t.close(),St=t.F;while(n--)delete St[Tt][yt[n]];return St()},Nt=Object.create||function(t,e){var n;return null!==t?(Et[Tt]=S(t),n=new Et,Et[Tt]=null,n[bt]=t):n=St(),void 0===e?n:wt(n,e)},Ot=r((function(t){var e=d("wks"),n=c.Symbol,i="function"==typeof n,o=t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:v)("Symbol."+t))};o.store=e})),Rt=A.f,Mt=Ot("toStringTag"),_t=function(t,e,n){t&&!l(t=n?t:t.prototype,Mt)&&Rt(t,Mt,{configurable:!0,value:e})},Ct={};j(Ct,Ot("iterator"),(function(){return this}));var Lt=function(t,e,n){t.prototype=Nt(Ct,{next:H(1,n)}),_t(t,e+" Iterator")},It=Ot("iterator"),Pt=!([].keys&&"next"in[].keys()),At="@@iterator",Ht="keys",jt="values",Bt=function(){return this},Dt=function(t,e,n,i,o,r,s){Lt(n,e,i);var h,a,l,u=function(t){if(!Pt&&t in p)return p[t];switch(t){case Ht:return function(){return new n(this,t)};case jt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},c=e+" Iterator",d=o==jt,g=!1,p=t.prototype,v=p[It]||p[At]||o&&p[o],y=v||u(o),m=o?d?u("entries"):y:void 0,w="Array"==e&&p.entries||v;if(w&&(l=k(w.call(new t)),l!==Object.prototype&&l.next&&(_t(l,c,!0),f||"function"==typeof l[It]||j(l,It,Bt))),d&&v&&v.name!==jt&&(g=!0,y=function(){return v.call(this)}),f&&!s||!Pt&&!g&&p[It]||j(p,It,y),it[e]=y,it[c]=Bt,o)if(h={values:d?y:u(jt),keys:r?y:u(Ht),entries:m},s)for(a in h)a in p||nt(p,a,h[a]);else F(F.P+F.F*(Pt||g),e,h);return h},Ft=et(!0);Dt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Ft(e,n),this._i+=t.length,{value:t,done:!1})}));var Gt=function(t,e){return{value:e,done:!!t}};Dt(Array,"Array",(function(t,e){this._t=ht(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Gt(1)):Gt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");it.Arguments=it.Array;for(var Vt=Ot("toStringTag"),zt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Ut=0;Ut<zt.length;Ut++){var Wt=zt[Ut],Kt=c[Wt],$t=Kt&&Kt.prototype;$t&&!$t[Vt]&&j($t,Vt,Wt),it[Wt]=it.Array}var qt=Ot,Yt={f:qt},Jt=Yt.f("iterator"),Xt=r((function(t){t.exports={default:Jt,__esModule:!0}}));o(Xt);var Qt=r((function(t){var e=v("meta"),n=A.f,i=0,o=Object.isExtensible||function(){return!0},r=!N((function(){return o(Object.preventExtensions({}))})),s=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},h=function(t,n){if(!T(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,e)){if(!o(t))return"F";if(!n)return"E";s(t)}return t[e].i},a=function(t,n){if(!l(t,e)){if(!o(t))return!0;if(!n)return!1;s(t)}return t[e].w},u=function(t){return r&&c.NEED&&o(t)&&!l(t,e)&&s(t),t},c=t.exports={KEY:e,NEED:!1,fastKey:h,getWeak:a,onFreeze:u}})),Zt=(Qt.KEY,Qt.NEED,Qt.fastKey,Qt.getWeak,Qt.onFreeze,A.f),te=function(t){var e=u.Symbol||(u.Symbol=f?{}:c.Symbol||{});"_"==t.charAt(0)||t in e||Zt(e,t,{value:Yt.f(t)})},ee=Object.getOwnPropertySymbols,ne={f:ee},ie={}.propertyIsEnumerable,oe={f:ie},re=function(t){var e=mt(t),n=ne.f;if(n){var i,o=n(t),r=oe.f,s=0;while(o.length>s)r.call(t,i=o[s++])&&e.push(i)}return e},se=Array.isArray||function(t){return"Array"==rt(t)},he=yt.concat("length","prototype"),ae=Object.getOwnPropertyNames||function(t){return vt(t,he)},le={f:ae},ue=le.f,ce={}.toString,fe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],de=function(t){try{return ue(t)}catch(e){return fe.slice()}},ge=function(t){return fe&&"[object Window]"==ce.call(t)?de(t):ue(ht(t))},pe={f:ge},ve=Object.getOwnPropertyDescriptor,ye=O?ve:function(t,e){if(t=ht(t),e=L(e,!0),C)try{return ve(t,e)}catch(n){}if(l(t,e))return H(!oe.f.call(t,e),t[e])},me={f:ye},we=Qt.KEY,xe=me.f,ke=A.f,be=pe.f,Ee=c.Symbol,Te=c.JSON,Se=Te&&Te.stringify,Ne="prototype",Oe=Ot("_hidden"),Re=Ot("toPrimitive"),Me={}.propertyIsEnumerable,_e=d("symbol-registry"),Ce=d("symbols"),Le=d("op-symbols"),Ie=Object[Ne],Pe="function"==typeof Ee,Ae=c.QObject,He=!Ae||!Ae[Ne]||!Ae[Ne].findChild,je=O&&N((function(){return 7!=Nt(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=xe(Ie,e);i&&delete Ie[e],ke(t,e,n),i&&t!==Ie&&ke(Ie,e,i)}:ke,Be=function(t){var e=Ce[t]=Nt(Ee[Ne]);return e._k=t,e},De=Pe&&"symbol"==typeof Ee.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Ee},Fe=function(t,e,n){return t===Ie&&Fe(Le,e,n),S(t),e=L(e,!0),S(n),l(Ce,e)?(n.enumerable?(l(t,Oe)&&t[Oe][e]&&(t[Oe][e]=!1),n=Nt(n,{enumerable:H(0,!1)})):(l(t,Oe)||ke(t,Oe,H(1,{})),t[Oe][e]=!0),je(t,e,n)):ke(t,e,n)},Ge=function(t,e){S(t);var n,i=re(e=ht(e)),o=0,r=i.length;while(r>o)Fe(t,n=i[o++],e[n]);return t},Ve=function(t,e){return void 0===e?Nt(t):Ge(Nt(t),e)},ze=function(t){var e=Me.call(this,t=L(t,!0));return!(this===Ie&&l(Ce,t)&&!l(Le,t))&&(!(e||!l(this,t)||!l(Ce,t)||l(this,Oe)&&this[Oe][t])||e)},Ue=function(t,e){if(t=ht(t),e=L(e,!0),t!==Ie||!l(Ce,e)||l(Le,e)){var n=xe(t,e);return!n||!l(Ce,e)||l(t,Oe)&&t[Oe][e]||(n.enumerable=!0),n}},We=function(t){var e,n=be(ht(t)),i=[],o=0;while(n.length>o)l(Ce,e=n[o++])||e==Oe||e==we||i.push(e);return i},Ke=function(t){var e,n=t===Ie,i=be(n?Le:ht(t)),o=[],r=0;while(i.length>r)!l(Ce,e=i[r++])||n&&!l(Ie,e)||o.push(Ce[e]);return o};Pe||(Ee=function(){if(this instanceof Ee)throw TypeError("Symbol is not a constructor!");var t=v(arguments.length>0?arguments[0]:void 0),e=function(n){this===Ie&&e.call(Le,n),l(this,Oe)&&l(this[Oe],t)&&(this[Oe][t]=!1),je(this,t,H(1,n))};return O&&He&&je(Ie,t,{configurable:!0,set:e}),Be(t)},nt(Ee[Ne],"toString",(function(){return this._k})),me.f=Ue,A.f=Fe,le.f=pe.f=We,oe.f=ze,ne.f=Ke,O&&!f&&nt(Ie,"propertyIsEnumerable",ze,!0),Yt.f=function(t){return Be(Ot(t))}),F(F.G+F.W+F.F*!Pe,{Symbol:Ee});for(var $e="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),qe=0;$e.length>qe;)Ot($e[qe++]);for(var Ye=mt(Ot.store),Je=0;Ye.length>Je;)te(Ye[Je++]);F(F.S+F.F*!Pe,"Symbol",{for:function(t){return l(_e,t+="")?_e[t]:_e[t]=Ee(t)},keyFor:function(t){if(!De(t))throw TypeError(t+" is not a symbol!");for(var e in _e)if(_e[e]===t)return e},useSetter:function(){He=!0},useSimple:function(){He=!1}}),F(F.S+F.F*!Pe,"Object",{create:Ve,defineProperty:Fe,defineProperties:Ge,getOwnPropertyDescriptor:Ue,getOwnPropertyNames:We,getOwnPropertySymbols:Ke}),Te&&F(F.S+F.F*(!Pe||N((function(){var t=Ee();return"[null]"!=Se([t])||"{}"!=Se({a:t})||"{}"!=Se(Object(t))}))),"JSON",{stringify:function(t){var e,n,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(n=e=i[1],(T(e)||void 0!==t)&&!De(t))return se(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!De(e))return e}),i[1]=e,Se.apply(Te,i)}}),Ee[Ne][Re]||j(Ee[Ne],Re,Ee[Ne].valueOf),_t(Ee,"Symbol"),_t(Math,"Math",!0),_t(c.JSON,"JSON",!0),te("asyncIterator"),te("observable");var Xe=u.Symbol,Qe=r((function(t){t.exports={default:Xe,__esModule:!0}}));o(Qe);var Ze=r((function(t,e){e.__esModule=!0;var n=r(Xt),i=r(Qe),o="function"===typeof i.default&&"symbol"===typeof n.default?function(t){return typeof t}:function(t){return t&&"function"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function r(t){return t&&t.__esModule?t:{default:t}}e.default="function"===typeof i.default&&"symbol"===o(n.default)?function(t){return"undefined"===typeof t?"undefined":o(t)}:function(t){return t&&"function"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":"undefined"===typeof t?"undefined":o(t)}}));o(Ze);var tn=r((function(t,e){e.__esModule=!0;var n=i(Ze);function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":(0,n.default)(e))&&"function"!==typeof e?t:e}})),en=o(tn),nn=me.f;G("getOwnPropertyDescriptor",(function(){return function(t,e){return nn(ht(t),e)}}));var on=u.Object,rn=function(t,e){return on.getOwnPropertyDescriptor(t,e)},sn=r((function(t){t.exports={default:rn,__esModule:!0}}));o(sn);var hn=r((function(t,e){e.__esModule=!0;var n=o(z),i=o(sn);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,o,r){null===e&&(e=Function.prototype);var s=(0,i.default)(e,o);if(void 0===s){var h=(0,n.default)(e);return null===h?void 0:t(h,o,r)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(r):void 0}})),an=o(hn),ln=function(t,e){if(S(t),!T(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},un={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=E(Function.call,me.f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,i){return ln(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:ln};F(F.S,"Object",{setPrototypeOf:un.set});var cn=u.Object.setPrototypeOf,fn=r((function(t){t.exports={default:cn,__esModule:!0}}));o(fn),F(F.S,"Object",{create:Nt});var dn=u.Object,gn=function(t,e){return dn.create(t,e)},pn=r((function(t){t.exports={default:gn,__esModule:!0}}));o(pn);var vn=r((function(t,e){e.__esModule=!0;var n=r(fn),i=r(pn),o=r(Ze);function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}})),yn=o(vn),mn=function(t,e,n,i){try{return i?e(S(n)[0],n[1]):e(n)}catch(r){var o=t["return"];throw void 0!==o&&S(o.call(t)),r}},wn=Ot("iterator"),xn=Array.prototype,kn=function(t){return void 0!==t&&(it.Array===t||xn[wn]===t)},bn=function(t,e,n){e in t?A.f(t,e,H(0,n)):t[e]=n},En=Ot("toStringTag"),Tn="Arguments"==rt(function(){return arguments}()),Sn=function(t,e){try{return t[e]}catch(n){}},Nn=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=Sn(e=Object(t),En))?n:Tn?rt(e):"Object"==(i=rt(e))&&"function"==typeof e.callee?"Arguments":i},On=Ot("iterator"),Rn=u.getIteratorMethod=function(t){if(void 0!=t)return t[On]||t["@@iterator"]||it[Nn(t)]},Mn=Ot("iterator"),_n=!1;try{var Cn=[7][Mn]();Cn["return"]=function(){_n=!0}}catch(To){}var Ln=function(t,e){if(!e&&!_n)return!1;var n=!1;try{var i=[7],o=i[Mn]();o.next=function(){return{done:n=!0}},i[Mn]=function(){return o},t(i)}catch(To){}return n};F(F.S+F.F*!Ln((function(t){})),"Array",{from:function(t){var e,n,i,o,r=h(t),s="function"==typeof this?this:Array,a=arguments.length,l=a>1?arguments[1]:void 0,u=void 0!==l,c=0,f=Rn(r);if(u&&(l=E(l,a>2?arguments[2]:void 0,2)),void 0==f||s==Array&&kn(f))for(e=lt(r.length),n=new s(e);e>c;c++)bn(n,c,u?l(r[c],c):r[c]);else for(o=f.call(r),n=new s;!(i=o.next()).done;c++)bn(n,c,u?mn(o,l,[i.value,c],!0):i.value);return n.length=c,n}});var In=u.Array.from,Pn=r((function(t){t.exports={default:In,__esModule:!0}}));o(Pn);var An=r((function(t,e){e.__esModule=!0;var n=i(Pn);function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,n.default)(t)}})),Hn=o(An),jn=Object.assign,Bn=!jn||N((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=jn({},t)[n]||Object.keys(jn({},e)).join("")!=i}))?function(t,e){var n=h(t),i=arguments.length,o=1,r=ne.f,s=oe.f;while(i>o){var a,l=st(arguments[o++]),u=r?mt(l).concat(r(l)):mt(l),c=u.length,f=0;while(c>f)s.call(l,a=u[f++])&&(n[a]=l[a])}return n}:jn;F(F.S+F.F,"Object",{assign:Bn});var Dn=u.Object.assign,Fn=r((function(t){t.exports={default:Dn,__esModule:!0}})),Gn=o(Fn);F(F.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});var Vn=9007199254740991,zn=r((function(t){t.exports={default:Vn,__esModule:!0}})),Un=o(zn),Wn=function(){function t(){K(this,t),this.element=null,this.container=document.body}return X(t,[{key:"createElement",value:function(){}},{key:"mount",value:function(){this.container.appendChild(this.element)}},{key:"show",value:function(){this.style.display="block"}},{key:"hide",value:function(){this.style.display="none"}},{key:"destroy",value:function(){this.element&&this.element.parentElement.removeChild(this.element)}},{key:"style",get:function(){return this.element.style}},{key:"isShow",get:function(){return"none"!==this.style.display&&""!==this.style.display}}]),t}(),Kn={NONE:"none",SELECTING:"selecting",FINISH:"finish"},$n={NODE:"node",REGION:"region"},qn={UNDERLINE:"underline",HIGHLIGHT:"highlight"},Yn={PC:"pc",MOBILE:"MOBILE"},Jn={SELECT:"select",HIGHLIGHT:"highlight"};function Xn(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];if(!t||t&&!t.childNodes)return null;for(var o=Number(window.getComputedStyle(t).lineHeight.replace("px","")),r=0;r<t.childNodes.length;r++){var s=t.childNodes[r];if("#text"===s.nodeName)for(var h=oi(s.textContent,i),a=0,l=document.createRange(),u=0;u<h.length;u++){var c=h[u].length;l.setStart(s,a),l.setEnd(s,a+c);for(var f=l.getClientRects(),d=0;d<f.length;d++){var g=f[d];o=o||g.height;var p=(o-g.height)/2;if(g.left<e&&g.right>e&&g.top-p<n&&g.bottom+p>n){for(var v=[],y=0;y<f.length;y++){var m=f[y];v.push(Gn({},m,{top:m.top-p,height:o,bottom:m.bottom+p,left:m.left,right:m.right,width:m.width}))}return{node:s,rects:v,textRects:f,index:a,wordsLength:c}}}a+=c}else{if("#comment"===s.nodeName)continue;var w=Xn(s,e,n,i);if(w)return w}}return null}function Qn(t,e,n,i){if(!t||!t&&t.childNodes)return null;for(var o=Number(window.getComputedStyle(t).lineHeight.replace("px","")),r=void 0,s=0;s<t.childNodes.length;s++){var h=t.childNodes[s],a=null;if("#text"===h.nodeName)for(var l=[].concat(Hn(h.textContent)),u=document.createRange(),c=void 0,f=0;f<l.length;f++){u.setStart(h,f),u.setEnd(h,f+1);var d=void 0,g=u.getClientRects(),p=void 0;if(g.length>1)p=g[1];else{if(1!==g.length)continue;p=g[0]}o=o||p.height;var v=(o-p.height)/2;if(p.top-v<=n&&p.bottom+v>=n){a={x:p.left,y:p.top-v,height:o,index:f,node:h};try{u.setStart(h,f+1),u.setEnd(h,f+2);var y=u.getClientRects();d=y.length>1?y[1]:1===y.length?y[0]:null}catch(b){d=null}var m=void 0===c||c&&c.bottom<=p.top,w=null===d||d&&d.top>=p.bottom;if(e<p.right){var x=e<(p.left+p.right)/2;return(!m||i)&&(x||w&&i)||(a.x+=p.width,a.index+=1),a}w&&(i||(a.x+=p.width,a.index+=1),r=a)}c=p}else{if("#comment"===h.nodeName)continue;var k=Qn(h,e,n,i);k&&(r=k)}if(s===t.childNodes.length-1&&r)return r}return null}function Zn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=ui(t);return{x:n.clientX+e.x,y:n.clientY+e.y}}function ti(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ei(t){if("number"===typeof t)return t;if("string"===typeof t){if(t.indexOf("px")>-1)return Number(t.replace("px",""));if(t.indexOf("rem")>-1){var e=Number((document.documentElement.style.fontSize||"24px").replace("px",""));return Number(t.replace("rem",""))*e}return Number(t)}return 0}function ni(t,e,n){var i=document.createRange(),o=void 0===e?0:e,r=void 0===n?t.textContent.length:n;try{return i.setStart(t,o),i.setEnd(t,r),hi(i.getClientRects())}catch(s){return console.error("EasyMarkerError:",s),[]}}function ii(t,e){return t.isSet?(t.y-=e.y,t.x-=e.x,t):t}function oi(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=e.reduce((function(t,e){return""===e?t:""===t?"\\"+e:t+"|\\"+e}),""),i=new RegExp("("+n+")"),o=t.split(i),r=[],s=0;s<o.length;s+=2){var h=o[s]+(o[s+1]||"");h.length>0&&r.push(h)}return r}function ri(t,e,n,i){return n.top-i<=e&&n.bottom+i>=e&&n.left<=t&&n.right>=t}function si(t){return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function hi(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function ai(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="",i=e.replace(/\s+/g,""),o=0,r=0;o<t.length;o++){if(r>=i.length)return n;t[o]===i[r]?(n+=t[o],r++):t[o].match(/\n|\r|\s/)?""!==n&&(n+=t[o]):(o-=n.length,r=0,n="")}return n}function li(){if("undefined"!==typeof navigator&&navigator.userAgent){var t=navigator.userAgent;return t.indexOf("Tablet")>-1||t.indexOf("Pad")>-1||t.indexOf("Nexus 7")>-1||(t.indexOf("Mobi")>-1||t.indexOf("Android")>-1||t.indexOf("iPh")>-1||t.indexOf("FLOW")>-1)?Yn.MOBILE:Yn.PC}return Yn.MOBILE}function ui(t){return li()===Yn.MOBILE?t.changedTouches[0]:{clientX:t.clientX,clientY:t.clientY}}function ci(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=0,r=t.length-1,s=Math.floor((o+r)/2),h=n?e[n]:e;if(h>=(n?t[r][n]:t[r]))return r;if(h<(n?t[o][n]:t[o]))return i?o:-1;while(o<=r){if(o===s||r===s)return s;(n?t[s][n]:t[s])>h?r=s:o=s,s=Math.floor((o+r)/2)}return s}function fi(t,e,n){var i=[];return 0===t.width||(i.push([t.left-n,t.top-n]),i.push([t.right+n,t.top-n]),i.push([t.right+n,t.bottom+n]),i.push([t.left-n,t.bottom+n]),i.forEach((function(t){t[0]-=e.x,t[1]-=e.y}))),i}var di={START:"start",END:"end"},gi={color:"#ff6b00"},pi=function(t){function e(t,n,i){K(this,e);var o=en(this,(e.__proto__||U(e)).call(this));return o.container=t,o.type=n,o.options=Gn({},gi,i),o.$position={x:0,y:0},o.$height=0,o.touchCallbackStack=[],o.topPoint=null,o.lineElement=null,o.bottomPoint=null,o.deviceType=li(),o.createElement(),o.mount(),o}return yn(e,t),X(e,[{key:"show",value:function(){this.deviceType!==Yn.PC&&(this.style.display="block")}},{key:"moveTo",value:function(t,e){this.style.top=e-this.width+"px",this.style.left=t-this.width/2+"px"}},{key:"createElement",value:function(){this.element=document.createElement("div"),this.style.userSelect="none",this.style.webkitUserSelect="none",this.style.zIndex="30",this.style.transition="top 0.1s, left 0.1s",this.style.display="none",this.style.position="absolute",this.topPoint=document.createElement("div"),this.topPoint.style.borderRadius="50%",this.topPoint.style.margin="auto",this.lineElement=document.createElement("div"),this.lineElement.style.margin="auto",this.lineElement.style.backgroundColor=this.options.color,this.bottomPoint=document.createElement("div"),this.bottomPoint.style.borderRadius="50%",this.bottomPoint.style.margin="auto",this.type===di.START?this.topPoint.style.backgroundColor=this.options.color:this.bottomPoint.style.backgroundColor=this.options.color,this.element.appendChild(this.topPoint),this.element.appendChild(this.lineElement),this.element.appendChild(this.bottomPoint)}},{key:"setCursorSize",value:function(t){var e=this.width+"px";this.style.width=e,this.topPoint.style.height=e,this.topPoint.style.width=e,this.bottomPoint.style.height=e,this.bottomPoint.style.width=e,this.lineElement.style.height=t+"px",this.lineElement.style.width=t/15+"px"}},{key:"inRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.deviceType===Yn.PC)return{inRegion:!1};var e=this.height,n=Un;return t.y>this.position.y&&t.y<this.position.y+this.height&&(n=Math.abs(t.x-this.position.x)),t.y>=this.position.y+this.with&&(n=ti(t,{x:this.position.x,y:this.position.y+this.height})),t.y<=this.position.y&&(n=ti(t,this.position)),{inRegion:n<=e,distance:n}}},{key:"position",set:function(t){var e=t.x,n=t.y;this.$position={x:e,y:n},this.moveTo(e,n)},get:function(){return this.$position}},{key:"height",get:function(){return this.$height},set:function(t){t!==this.$height&&(this.$height=t,this.setCursorSize(t))}},{key:"width",get:function(){return this.height/4}}]),e}(Wn),vi=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:j(t,i,e[i]);return t},yi=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t},mi=r((function(t){var e={},n={},i=t.exports=function(t,i,o,r,s){var h,a,l,u,c=s?function(){return t}:Rn(t),f=E(o,r,i?2:1),d=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(kn(c)){for(h=lt(t.length);h>d;d++)if(u=i?f(S(a=t[d])[0],a[1]):f(t[d]),u===e||u===n)return u}else for(l=c.call(t);!(a=l.next()).done;)if(u=mn(l,f,a.value,i),u===e||u===n)return u};i.BREAK=e,i.RETURN=n})),wi=Ot("species"),xi=function(t){var e="function"==typeof u[t]?u[t]:c[t];O&&e&&!e[wi]&&A.f(e,wi,{configurable:!0,get:function(){return this}})},ki=function(t,e){if(!T(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},bi=A.f,Ei=Qt.fastKey,Ti=O?"_s":"size",Si=function(t,e){var n,i=Ei(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n},Ni={getConstructor:function(t,e,n,i){var o=t((function(t,r){yi(t,o,e,"_i"),t._t=e,t._i=Nt(null),t._f=void 0,t._l=void 0,t[Ti]=0,void 0!=r&&mi(r,n,t[i],t)}));return vi(o.prototype,{clear:function(){for(var t=ki(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[Ti]=0},delete:function(t){var n=ki(this,e),i=Si(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[Ti]--}return!!i},forEach:function(t){ki(this,e);var n,i=E(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){i(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!Si(ki(this,e),t)}}),O&&bi(o.prototype,"size",{get:function(){return ki(this,e)[Ti]}}),o},def:function(t,e,n){var i,o,r=Si(t,e);return r?r.v=n:(t._l=r={i:o=Ei(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[Ti]++,"F"!==o&&(t._i[o]=r)),t},getEntry:Si,setStrong:function(t,e,n){Dt(t,e,(function(t,n){this._t=ki(t,e),this._k=n,this._l=void 0}),(function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?Gt(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,Gt(1))}),n?"entries":"values",!n,!0),xi(e)}},Oi=Ot("species"),Ri=function(t){var e;return se(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!se(e.prototype)||(e=void 0),T(e)&&(e=e[Oi],null===e&&(e=void 0))),void 0===e?Array:e},Mi=function(t,e){return new(Ri(t))(e)},_i=function(t,e){var n=1==t,i=2==t,o=3==t,r=4==t,s=6==t,a=5==t||s,l=e||Mi;return function(e,u,c){for(var f,d,g=h(e),p=st(g),v=E(u,c,3),y=lt(p.length),m=0,w=n?l(e,y):i?l(e,0):void 0;y>m;m++)if((a||m in p)&&(f=p[m],d=v(f,m,g),t))if(n)w[m]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:w.push(f)}else if(r)return!1;return s?-1:o||r?r:w}},Ci=A.f,Li=_i(0),Ii=function(t,e,n,i,o,r){var s=c[t],h=s,a=o?"set":"add",l=h&&h.prototype,u={};return O&&"function"==typeof h&&(r||l.forEach&&!N((function(){(new h).entries().next()})))?(h=e((function(e,n){yi(e,h,t,"_c"),e._c=new s,void 0!=n&&mi(n,o,e[a],e)})),Li("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(t){var e="add"==t||"set"==t;!(t in l)||r&&"clear"==t||j(h.prototype,t,(function(n,i){if(yi(this,h,t),!e&&r&&!T(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,i);return e?this:o}))})),r||Ci(h.prototype,"size",{get:function(){return this._c.size}})):(h=i.getConstructor(e,t,o,a),vi(h.prototype,n),Qt.NEED=!0),_t(h,t),u[t]=h,F(F.G+F.W+F.F,u),r||i.setStrong(h,t,o),h},Pi="Map",Ai=(Ii(Pi,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=Ni.getEntry(ki(this,Pi),t);return e&&e.v},set:function(t,e){return Ni.def(ki(this,Pi),0===t?0:t,e)}},Ni,!0),function(t,e){var n=[];return mi(t,!1,n.push,n,e),n}),Hi=function(t){return function(){if(Nn(this)!=t)throw TypeError(t+"#toJSON isn't generic");return Ai(this)}};F(F.P+F.R,"Map",{toJSON:Hi("Map")});var ji=function(t){F(F.S,t,{of:function(){var t=arguments.length,e=new Array(t);while(t--)e[t]=arguments[t];return new this(e)}})};ji("Map");var Bi=function(t){F(F.S,t,{from:function(t){var e,n,i,o,r=arguments[1];return b(this),e=void 0!==r,e&&b(r),void 0==t?new this:(n=[],e?(i=0,o=E(r,arguments[2],2),mi(t,!1,(function(t){n.push(o(t,i++))}))):mi(t,!1,n.push,n),new this(n))}})};Bi("Map");var Di=u.Map,Fi=r((function(t){t.exports={default:Di,__esModule:!0}})),Gi=o(Fi),Vi=function(){function t(){K(this,t),this.y=0,this.x=0,this.width=0,this.height=0}return X(t,[{key:"setAll",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},{key:"equal",value:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"isSet",get:function(){return 0!==this.y||0!==this.x||0!==this.width||0!==this.height}}]),t}(),zi=function(){function t(e,n){K(this,t),this.node=e,this.offset=n}return X(t,null,[{key:"getSelectText",value:function(t,e){try{var n=this.getSelectNodeRectAndText(t.node,e.node,t.offset,e.offset),i=n.text;return i}catch(o){return console.error("EasyMarkerError:",o),""}}},{key:"getSelectRects",value:function(t,e){var n=new Vi,i=new Vi,o=new Vi;if(!t||!e)return{header:n,body:i,footer:o};if("#text"!==t.node.nodeName||"#text"!==e.node.nodeName)return console.error("The parameters for getting the selection rect should be a TextNode",{startTextNode:t,endTextNode:e}),{header:n,body:i,footer:o};var r=void 0;try{var s=this.getSelectNodeRectAndText(t.node,e.node,t.offset,e.offset);r=s.rects}catch(y){console.error("EasyMarkerError:",y),r=[]}var h=[];r.forEach((function(t){if(h.length>0){var e=h[h.length-1],n=e.height/2;Math.abs(e.top-t.top)<n&&Math.abs(e.bottom-t.bottom)<n?(e.width+=t.width,e.height=e.height-t.height>0?e.height:t.height,e.top=e.top-t.top<0?e.top:t.top,e.bottom=e.bottom-t.bottom>0?e.bottom:t.bottom):h.push(si(t))}else h.push(si(t))}));var a=0,l=[],u=[];if(h.length>0){var c=h.shift();a=Number(window.getComputedStyle(t.node.parentElement).lineHeight.replace("px",""))||c.height,n.x=c.left,n.width=c.width,n.y=c.top-(a-c.height)/2,n.height=a,l.push(n.x),u.push(c.right)}var f=0;if(h.length>0){var d=h.pop();f=Number(window.getComputedStyle(e.node.parentElement).lineHeight.replace("px",""))||d.height,o.x=d.left,o.width=d.width,o.y=d.top-(f-d.height)/2,o.height=f,l.push(o.x),u.push(d.right)}if(h.length>0){var g=0;h.forEach((function(t){i.x&&i.width?(t.left<i.x&&(i.x=t.left),t.width>i.width&&(i.width=t.width),g<t.right&&(g=t.right)):(i.x=t.left,i.width=t.width,g=t.right)})),l.push(i.x),u.push(g)}var p=Math.min.apply(Math,l);p!==1/0&&(i.x=p);var v=Math.max.apply(Math,u);return v!==-1/0&&(i.width=v-i.x),i.y=n.y+a,o.isSet?i.height=o.y-i.y:(o.x=n.x,o.y=n.y+a),{header:n,body:i,footer:o}}},{key:"getSelectNodeRectAndText",value:function(t,e,n,i){var o={rects:[],text:""};if(t.childNodes.length>0&&"SCRIPT"!==t.nodeName&&"STYLE"!==t.nodeName){var r,s=t.childNodes[0],h=this.getSelectNodeRectAndText(s,e,0,i),a=h.text,l=h.rects;return(r=o.rects).push.apply(r,Hn(l)),o.text+=a,o}if("#text"===t.nodeName){var u,c=t===e?i:t.textContent.length;(u=o.rects).push.apply(u,Hn(ni(t,n,c))),o.text+=t.textContent.substring(n,c)}if("IMG"===t.nodeName&&o.rects.push(t.getBoundingClientRect()),t===e)return o;var f=t.nextSibling;if(f){var d,g=this.getSelectNodeRectAndText(f,e,0,i),p=g.text,v=g.rects;(d=o.rects).push.apply(d,Hn(v)),o.text+=p}else{var y=t.parentNode;while(y&&null===y.nextSibling)y=y.parentNode;if(!y)throw new Error("Invalid end node");var m,w=this.getSelectNodeRectAndText(y.nextSibling,e,0,i),x=w.text,k=w.rects;(m=o.rects).push.apply(m,Hn(k)),o.text+=x}return o}}]),t}(),Ui=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K(this,e);var i=en(this,(e.__proto__||U(e)).call(this));return i.container=t,i.handler=null,i.mode=n.mode,i.option={items:n.menuItems,isMultiColumnLayout:n.isMultiColumnLayout,topOffset:ei(n.topOffset),style:{menu:{fontSize:"0.4rem",backgroundColor:"#262626",fontColor:"#fff",borderRadius:"0.1rem",color:"#fff",border:"0px",display:"inline-block",padding:"0 0.2rem",margin:"auto"},triangle:{marginLeft:"auto",marginRight:"auto",borderTop:"0.2rem solid #262626",borderRight:"0.2rem solid transparent",borderLeft:"0.2rem solid transparent",width:"0",height:"0",marginTop:"-1px"},item:{lineHeight:"1.24rem",padding:"0 0.3rem",color:"#fff",display:"inline-block"},icon:{display:"block"}}},n.style&&(Gn(i.option.style.menu,n.style.menu),Gn(i.option.style.triangle,n.style.triangle),Gn(i.option.style.item,n.style.item),Gn(i.option.style.icon,n.style.icon)),i.easyMarker=null,i.menuElement=null,i.itemMap=new Gi,i.positionRange={top:0,bottom:0,left:0},i.windowWidth=document.documentElement.clientWidth,i.ticking=!1,i.height=0,i.width=0,i.type=Jn.SELECT,i.options={},i.createElement(),i.mount(),i.hide(),i}return yn(e,t),X(e,[{key:"createElement",value:function(){var t=this,e=document.createElement("div");e.style.position="absolute",e.style.width="max-content",e.style.textAlign="center",e.style.lineHeight="0",e.style.zIndex="50",e.style.transform="translate3d(-50%, -100%, 0)",e.style.webkitTransform="translate3d(-50%, -100%, 0)",e.style.transition="transform 0.2s ease, opacity 0.2s ease";var n=document.createElement("div");n.classList.add("em-menu"),Gn(n.style,this.option.style.menu);var i=document.createElement("div");i.classList.add("em-menu-triangle"),Gn(i.style,this.option.style.triangle),e.appendChild(n),e.appendChild(i),this.option.items.forEach((function(e){var i=t.createMenuItemElement(e);t.itemMap.set(i,e),n.appendChild(i)})),this.menuElement=n,this.element=e;var o=document.createElement("style");o.type="text/css",o.rel="stylesheet";var r=".em-menu-wrapper-select .em-menu-item-highlight{display: none !important} .em-menu-wrapper-highlight .em-menu-item-select{display: none !important}";o.appendChild(document.createTextNode(r));var s=document.getElementsByTagName("head")[0];s.appendChild(o)}},{key:"createMenuItemElement",value:function(t){var e=t.text,n=t.iconName,i=t.style,o=t.iconStyle,r=t.type,s=document.createElement("span");if(s.classList.add("em-menu-item"),void 0!==r&&s.classList.add("em-menu-item-"+r),Gn(s.style,this.option.style.item,i),n){var h=document.createElement("span");Gn(h.style,this.option.style.icon,o),h.className="em-menu-item-icon ".concat(n);var a=document.createTextNode(e);s.appendChild(h),s.appendChild(a)}else{var l=document.createTextNode(e);s.appendChild(l)}return s}},{key:"setPosition",value:function(t,e){var n=this,i={};if(this.mode===$n.REGION){var o=void 0;if(t.pageIndex!==e.pageIndex){var r=this.easyMarker.region.regions[e.pageIndex].regions[0].regions[0];o=this.easyMarker.region.getRects(r,e)}else o=this.easyMarker.region.getRects(t,e);o.forEach((function(t,e){0===e?(i.left=t.left,i.top=t.top,i.right=t.right,i.bottom=t.bottom):(i.left=Math.min(t.left,i.left),i.top=Math.min(t.top,i.top),i.right=Math.max(t.right,i.right),i.bottom=Math.max(t.bottom,i.bottom))}))}else{var s=zi.getSelectNodeRectAndText(t.node,e.node,t.offset,e.offset),h=s.rects;h.filter((function(t){return t.left<=n.windowWidth&&t.left>=0})).forEach((function(t,e){0===e?(i.left=t.left-n.screenRelativeOffset.x,i.top=t.top-n.screenRelativeOffset.y,i.right=t.right-n.screenRelativeOffset.x,i.bottom=t.bottom-n.screenRelativeOffset.y):e===h.length-1?i.bottom=t.bottom-n.screenRelativeOffset.y:(i.left=Math.min(t.left-n.screenRelativeOffset.x,i.left),i.right=Math.max(t.right-n.screenRelativeOffset.x,i.right))}))}this.positionRange.top=i.top,this.positionRange.bottom=i.bottom,this.positionRange.left=(i.left+i.right)/2}},{key:"hide",value:function(){this.style.visibility="hidden",this.style.opacity="0",this.reset()}},{key:"reset",value:function(){this.options={}}},{key:"show",value:function(){this.type===Jn.HIGHLIGHT?(this.element.classList.remove("em-menu-wrapper-select"),this.element.classList.add("em-menu-wrapper-highlight")):this.type===Jn.SELECT&&(this.element.classList.remove("em-menu-wrapper-highlight"),this.element.classList.add("em-menu-wrapper-select"));var t=0;this.height&&this.width||(this.height=Number((window.getComputedStyle(this.menuElement).height||"").replace("px","")),this.width=Number((window.getComputedStyle(this.menuElement).width||"").replace("px","")));var e=this.container.getBoundingClientRect(),n=e.top,i=e.right,o=e.left;if(n<0&&this.positionRange.bottom<-n?(t=this.positionRange.bottom,this.style.position="absolute"):this.positionRange.top-this.height-this.option.topOffset>-n?(t=this.positionRange.top,this.style.position="absolute"):(this.style.position="fixed",t=this.option.topOffset+this.height),this.style.visibility="visible",this.style.top=t+"px",this.positionRange.left+o+this.width/2>this.windowWidth){var r=void 0;"fixed"!==this.style.position||this.option.isMultiColumnLayout?r=i-this.positionRange.left-o-this.width/2:(r=i-this.positionRange.left-this.width/2,r=o<0?-this.width/2:r),this.style.right=r+"px",this.style.left=""}else if(this.positionRange.left+o-this.width/2<0){var s=void 0;"fixed"!==this.style.position||this.option.isMultiColumnLayout?s=this.width/2+this.positionRange.left:(s=this.width/2+this.positionRange.left+o,s=s<0?this.width/2:s),this.style.left=s+"px",this.style.right=""}else{var h=void 0;"fixed"!==this.style.position||this.option.isMultiColumnLayout?h=this.positionRange.left:(h=this.positionRange.left+o,h=h<0?this.width/2:h),this.style.left=h+"px",this.style.right=""}this.style.opacity="1"}},{key:"copyListener",value:function(t,e){var n=void 0;if(this.itemMap.forEach((function(t){"copy"!==t.id&&"复制"!==t.text||(n=t)})),n){var i=this.getSelection(t);n.id&&this.easyMarker.menuOnClick?this.easyMarker.menuOnClick(n.id,i,Gn({},this.options,{e:e})):n.handler.call(this.easyMarker,i,Gn({},this.options,{e:e}))}}},{key:"inRegion",value:function(t){var e=this.getTapTarget(t.target);return!!this.itemMap.has(e)}},{key:"handleTap",value:function(t,e){var n=this.getTapTarget(t.target);if(!this.itemMap.has(n))return!1;var i=this.getSelection(e),o=this.itemMap.get(n);return o.id&&this.easyMarker.menuOnClick?this.easyMarker.menuOnClick(o.id,i,this.options):o.handler.call(this.easyMarker,i,this.options),!0}},{key:"getSelection",value:function(t){var e=void 0;if(this.mode===$n.NODE){var n=t.start,i=t.end,o=t.content,r=t.markdown;e={anchorNode:n.node,anchorOffset:n.offset,focusNode:i.node,focusOffset:i.offset,toString:function(){return o},toMarkdown:function(){return r}}}else{var s=t.start,h=t.end,a=t.content,l=t.markdown;e={start:s,end:h,toString:function(){return a},toMarkdown:function(){return l}}}return e}},{key:"getTapTarget",value:function(t){return this.itemMap.has(t)?t:t.parentNode?this.getTapTarget(t.parentNode):null}},{key:"handleScroll",value:function(){var t=this;this.ticking||(window.requestAnimationFrame((function(){t.show(),t.ticking=!1})),this.ticking=!0)}},{key:"screenRelativeOffset",get:function(){return this.easyMarker?this.easyMarker.screenRelativeOffset:{x:0,y:0}}},{key:"isShow",get:function(){return"visible"===this.style.visibility}}]),e}(Wn),Wi=Ot("iterator"),Ki=u.isIterable=function(t){var e=Object(t);return void 0!==e[Wi]||"@@iterator"in e||it.hasOwnProperty(Nn(e))},$i=Ki,qi=r((function(t){t.exports={default:$i,__esModule:!0}}));o(qi);var Yi=u.getIterator=function(t){var e=Rn(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return S(e.call(t))},Ji=Yi,Xi=r((function(t){t.exports={default:Ji,__esModule:!0}}));o(Xi);var Qi=r((function(t,e){e.__esModule=!0;var n=o(qi),i=o(Xi);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){var n=[],o=!0,r=!1,s=void 0;try{for(var h,a=(0,i.default)(t);!(o=(h=a.next()).done);o=!0)if(n.push(h.value),e&&n.length===e)break}catch(l){r=!0,s=l}finally{try{!o&&a["return"]&&a["return"]()}finally{if(r)throw s}}return n}return function(e,i){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()})),Zi=o(Qi),to={BLOCK:"block",LINE:"line"},eo=function(t){function e(t,n){K(this,e);var i=en(this,(e.__proto__||U(e)).call(this)),o={color:"#FEFFCA",opacity:.5,animateDuration:100};return i.mode=n.mode||$n.NODE,i.maskType=n.maskType||(i.mode===$n.NODE?to.BLOCK:to.LINE),i.container=t,i.option=Gn(o,n),i.maskType===to.BLOCK?(i.paths=[],i.position={header:new Vi,body:new Vi,footer:new Vi},i.animateStartTime=0,i.animateEndTime=0,i.animatePercent=0,i.polygonElement=null):i.rects=[],i.animating=!1,i.easyMarker=null,i.createElement(),i.mount(),i}return yn(e,t),X(e,[{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.style.zIndex="20",t.style.pointerEvents="none",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.overflow="visible",this.maskType===to.BLOCK){var e=document.createElementNS("http://www.w3.org/2000/svg","polygon");e.style.fill=this.option.color,e.style.strokeWidth=0,e.style.strokeOpacity=this.option.opacity,e.style.opacity=this.option.opacity,e.style.transition="opacity 0.2s ease",t.appendChild(e),this.polygonElement=e}this.element=t}},{key:"render",value:function(t,e){if(this.mode===$n.NODE)if("line"===this.maskType){var n=void 0;try{var i=zi.getSelectNodeRectAndText(t.node,e.node,t.offset,e.offset);n=i.rects}catch(v){console.error("EasyMarkerError:",v),n=[]}var o=Number(window.getComputedStyle(t.node.parentElement).lineHeight.replace("px",""));this.renderRectsLine(n,o)}else{var r=zi.getSelectRects(t,e),s=r.header,h=r.body,a=r.footer,l=ii(s,this.screenRelativeOffset),u=ii(h,this.screenRelativeOffset),c=ii(a,this.screenRelativeOffset);this.renderBlock(l,u,c)}if(this.mode===$n.REGION){var f=this.easyMarker.region.getRects(t,e);if("line"===this.maskType)this.renderRectsLine(f);else{var d=void 0,g=void 0,p=void 0;f.forEach((function(t,e){if(0===e)d=new Vi,p=new Vi,g=new Vi,d.setAll(t),p.setAll(t),g.setAll(t),p.y=t.y+t.height,p.height=0,g.height=0,g.y=t.y+t.height;else if(e===f.length-1)g.setAll(t),p.height=t.y-(d.y+d.height);else{var n=p.x+p.width,i=p.x;t.x<i&&(p.x=t.x),t.x+t.width>=n&&(p.width=t.x+t.width-p.x)}})),this.renderBlock(d,p,g)}}}},{key:"renderBlock",value:function(t,e,n){var i=this.position,o=i.header,r=i.body,s=i.footer;if(!(0!==this.paths.length&&o.equal(t)&&r.equal(e)&&s.equal(n))){this.polygonElement.style.opacity=this.option.opacity;var h=this.position;this.position.header.setAll(t),this.position.body.setAll(e),this.position.footer.setAll(n),this.animateStartTime=Date.now(),this.animateEndTime=this.animateStartTime+this.option.animateDuration,this.animatePercent=0,this.animating||(this.animating=!0,this.animated(h))}}},{key:"animated",value:function(t){var e=this,n=(Date.now()-this.animateStartTime)/(this.animateEndTime-this.animateStartTime),i=0;if(n>=1)i=1,this.animatePercent=1;else{var o=1e3/60/this.option.animateDuration+1.3*(n-this.animatePercent);this.animatePercent+=o,i=o>1?1:o/(1-n)}var r=this.constructor.getAnimateFrame(t.header,this.position.header,i),s=this.constructor.getAnimateFrame(t.body,this.position.body,i),h=this.constructor.getAnimateFrame(t.footer,this.position.footer,i),a={header:r,body:s,footer:h};this.paths=this.constructor.getPaths(a);var l=this.paths.map((function(t){var e=Zi(t,2),n=e[0],i=e[1];return n+","+i})).join(" ");this.polygonElement.setAttribute("points",l),n>=1?this.animating=!1:window.requestAnimationFrame((function(){return e.animated(a)}))}},{key:"reset",value:function(){this.maskType===to.BLOCK&&(this.paths=[],this.polygonElement.style.opacity="0",this.polygonElement.setAttribute("points","")),this.maskType===to.LINE&&this.removeAllRectangle()}},{key:"renderRectsLine",value:function(t,e){var n=this;this.rects=t;var i=t.map((function(t){var i=0,o={x:0,y:0};return n.mode===$n.NODE&&(e=e||t.height,i=n.option.margin||(e-t.height)/4,o=n.screenRelativeOffset),fi(t,o,i)}));this.animating||(this.animating=!0,window.requestAnimationFrame((function(){return n.renderRectsLineAnimated(i)})))}},{key:"renderRectsLineAnimated",value:function(t){var e=this;this.removeAllRectangle(),t.forEach((function(t){e.element.appendChild(e.createRectangle(t))})),this.animating=!1}},{key:"createRectangle",value:function(t){var e=t.reduce((function(t,e){var n=Zi(e,2),i=n[0],o=n[1];return""===t?i+","+o:t+" "+i+","+o}),""),n=document.createElementNS("http://www.w3.org/2000/svg","polygon");return n.style.fill=this.option.color,n.style.strokeWidth=0,n.style.strokeOpacity=this.option.opacity,n.style.opacity=this.option.opacity,n.setAttribute("points",e),n}},{key:"removeAllRectangle",value:function(){while(this.element.firstChild)this.element.removeChild(this.element.firstChild)}},{key:"screenRelativeOffset",get:function(){return this.easyMarker?this.easyMarker.screenRelativeOffset:{x:0,y:0}}},{key:"top",get:function(){return this.maskType===to.BLOCK?this.position.header.y:this.rects[0]?this.mode===$n.NODE?this.rects[0].top-this.screenRelativeOffset.y:this.rects[0].top:0}},{key:"left",get:function(){return this.maskType===to.BLOCK?this.position.header.x:this.rects[0]?this.mode===$n.NODE?this.rects[0].left-this.screenRelativeOffset.x:this.rects[0].left:0}},{key:"height",get:function(){if(this.maskType===to.BLOCK)return this.position.header.height+this.position.body.height+this.position.footer.height;var t=this.rects[this.rects.length-1];return t?t.top+t.height:0}}],[{key:"getAnimateFrame",value:function(t,e,n){var i=new Vi;return i.x=t.x+(e.x-t.x)*n,i.y=t.y+(e.y-t.y)*n,i.height=t.height+(e.height-t.height)*n,i.width=t.width+(e.width-t.width)*n,i}},{key:"getPaths",value:function(t){var e=t.header,n=t.body,i=t.footer,o=[];return e.isSet&&(o.push([e.x,e.y]),o.push([e.x+e.width,e.y]),o.push([e.x+e.width,e.y+e.height])),n.isSet&&(o.push([n.x+n.width,n.y]),o.push([n.x+n.width,n.y+n.height])),i.isSet&&(o.push([i.x+i.width,i.y]),o.push([i.x+i.width,i.y+i.height]),o.push([i.x,i.y+i.height]),o.push([i.x,i.y])),n.isSet&&(o.push([n.x,n.y+n.height]),o.push([n.x,n.y])),e.isSet&&o.push([e.x,e.y+e.height]),o}}]),e}(Wn),no=function(t){function e(t,n){K(this,e);var i=en(this,(e.__proto__||U(e)).call(this)),o={highlightColor:"#FEFFCA",underlineColor:"#af8978",underlineWidth:1,tagBackground:"#af8978",tagColor:"#fff",opacity:1,type:"highlight"};return i.container=t,i.mode=n.mode||$n.NODE,i.option=Gn(o,n),n.color&&(i.option.highlightColor=n.color),i.type=i.option.type||qn.Highlight,i.option.margin=ei(i.option.margin),i.lineMap=new Gi,i.createElement(),i.mount(),i.id=0,i.easyMarker=null,i}return yn(e,t),X(e,[{key:"getID",value:function(){return this.id++}},{key:"highlight",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0===e||null===e?this.getID():e,r=void 0,s=void 0,h=[],a=void 0;if(this.mode===$n.NODE){var l=new zi(t.anchorNode,t.anchorOffset),u=new zi(t.focusNode,t.focusOffset);a=Number(window.getComputedStyle(t.anchorNode.parentElement).lineHeight.replace("px",""));var c=void 0,f=void 0;try{var d=zi.getSelectNodeRectAndText(l.node,u.node,l.offset,u.offset);c=d.rects,f=d.text}catch(k){console.error("EasyMarkerError:",k),c=[],f=""}var g=this.screenRelativeOffset;r=c.map((function(t){var e={top:t.top-g.y,bottom:t.bottom-g.y,height:t.height,width:t.width,left:t.left-g.x,right:t.right-g.x};h.push(e),a=a||t.height;var i=n.option.margin||(a-t.height)/4;return fi(t,g,i)}));var p=void 0;if(this.easyMarker&&this.easyMarker.markdown){var v=this.easyMarker.markdown.getSelectMarkdown(l.node,u.node,l.offset,u.offset);p=v.markdown}else p="";s=Gn({toString:function(){return f},toMarkdown:function(){return p}},t)}else{var y=t.start,m=t.end;h=this.easyMarker&&this.easyMarker.region.getRects(y,m);var w=this.easyMarker&&this.easyMarker.region.getText(y,m),x=this.easyMarker&&this.easyMarker.constructor.getSelectMarkdown();r=h.map((function(t){var e=0;return fi(t,{x:0,y:0},e)})),s=Gn({toString:function(){return w},toMarkdown:function(){return x}},t)}return this.lineMap.set(o,{selection:s,points:r,relativeRects:h,meta:i,lineHeight:a}),o}},{key:"render",value:function(){var t=this;this.removeAllRectangle(),this.lineMap.forEach((function(e){var n=e.meta.type||t.type;e.points.forEach((function(i,o){if(n===qn.UNDERLINE?t.element.appendChild(t.createLine(i)):t.element.appendChild(t.createRectangle(i)),e.points.length-1===o&&e.meta&&e.meta.tag){var r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("x",i[2][0]-5),r.setAttribute("y",i[2][1]+4),r.setAttribute("dominant-baseline","hanging"),r.setAttribute("text-anchor","end"),r.setAttribute("font-size","10"),r.setAttribute("fill",t.option.tagColor),r.textContent=e.meta.tag,r.classList.add("em-highlight-tag-text"),t.element.appendChild(r);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",i[2][0]-25-5),s.setAttribute("y",i[2][1]-0),s.setAttribute("rx",2),s.setAttribute("ry",2),s.setAttribute("width",30),s.setAttribute("height",16),s.setAttribute("fill",t.option.tagBackground),t.element.insertBefore(s,r)}}))}))}},{key:"highlightLines",value:function(t){var e=this;this.lineMap.clear();var n=t.map((function(t){var n=t.selection,i=t.id,o=t.meta;return e.highlight(n,i,o)}));return this.render(),n}},{key:"highlightLine",value:function(t,e,n){var i=this.highlight(t,e,n);return this.render(),i}},{key:"cancelHighlightLine",value:function(t){this.lineMap.delete(t),this.render()}},{key:"createElement",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.zIndex="10",t.style.pointerEvents="none",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.overflow="visible",this.element=t}},{key:"createLine",value:function(t){var e=t[2][0],n=t[2][1]+1,i=t[3][0],o=t[3][1]+1,r=document.createElementNS("http://www.w3.org/2000/svg","line");return r.style.stroke=this.option.underlineColor,r.style.strokeWidth=this.option.underlineWidth,r.setAttribute("x1",e),r.setAttribute("y1",n),r.setAttribute("x2",i),r.setAttribute("y2",o),r}},{key:"createRectangle",value:function(t){var e=t.reduce((function(t,e){var n=Zi(e,2),i=n[0],o=n[1];return""===t?i+","+o:t+" "+i+","+o}),""),n=document.createElementNS("http://www.w3.org/2000/svg","polygon");return n.style.fill=this.option.highlightColor,n.style.strokeWidth=0,n.style.strokeOpacity=this.option.opacity,n.style.opacity=this.option.opacity,n.setAttribute("points",e),n}},{key:"handleTap",value:function(t){var e=Zn(t),n=e.x,i=e.y,o=this.container.getBoundingClientRect(),r=o.top,s=o.left,h=void 0;return this.lineMap.forEach((function(t,e){for(var o=0;o<t.relativeRects.length;o++){var a=t.relativeRects[o],l=t.lineHeight?(t.lineHeight-a.height)/2:0;if(ri(n-s,i-r,a,l)){h={id:e,line:t};break}}})),!(!h||!this.easyMarker)&&(this.easyMarker.highlightLineClick?this.easyMarker.highlightLineClick(h.id,h.line.meta,h.line.selection,t):this.easyMarker.showHighlightMenu(h.line.selection,{id:h.id,meta:h.line.meta}),!0)}},{key:"inRegion",value:function(t){var e=Zn(t),n=e.x,i=e.y,o=this.container.getBoundingClientRect(),r=o.top,s=o.left,h=void 0;return this.lineMap.forEach((function(t,e){for(var o=0;o<t.relativeRects.length;o++){var a=t.relativeRects[o],l=t.lineHeight?(t.lineHeight-a.height)/2:0;if(ri(n-s,i-r,a,l)){h={id:e,line:t};break}}})),!(!h||!this.easyMarker)}},{key:"removeAllRectangle",value:function(){while(this.element.firstChild)this.element.removeChild(this.element.firstChild)}},{key:"screenRelativeOffset",get:function(){return this.easyMarker?this.easyMarker.screenRelativeOffset:{x:0,y:0}}}]),e}(Wn),io=Qt.onFreeze;G("freeze",(function(t){return function(e){return t&&T(e)?t(io(e)):e}}));var oo=u.Object.freeze,ro=r((function(t){t.exports={default:oo,__esModule:!0}})),so=o(ro),ho=so({H1:function(t){return"\n# "+t+"\n\n"},H2:function(t){return"\n## "+t+"\n\n"},H3:function(t){return"\n### "+t+"\n\n"},H4:function(t){return"\n#### "+t+"\n\n"},H5:function(t){return"\n##### "+t+"\n\n"},H6:function(t){return"\n###### "+t+"\n\n"},P:function(t){return t+"\n\n"},FIGCAPTION:function(t){return t+"\n\n"},STRONG:function(t){return"**"+t+"**"},B:function(t){return"**"+t+"**"},EM:function(t){return"*"+t+"*"},I:function(t){return"*"+t+"*"},S:function(t){return"~~"+t+"~~"},INS:function(t){return"++"+t+"++"},IMG:function(t){return"!["+t.alt+"]("+t.src+"?size="+t.width+"x"+t.height+")\n"},UL:function(t,e){return e.listLevel>1?"\n"+t:"\n"+t+"\n\n"},OL:function(t,e){return e.listLevel>1?"\n"+t:"\n"+t+"\n\n"},LI:function(t,e){for(var n="",i=1;i<e.itemLevel;i++)n+="    ";var o="\n";return(e.hasChild||e.isLastOne)&&(o=""),"UL"===e.type?n+"- "+t+o:""+n+e.index+". "+t+o}}),ao=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K(this,t),this.container=e,this.wrapMarkdown=t.wrapMarkdown,this.options=Gn({},ho,n)}return X(t,[{key:"getSelectMarkdown",value:function(t,e,n,i,o){var r={markdown:""},s="";if(void 0===o&&(o=[]),t.childNodes.length>0&&"SCRIPT"!==t.nodeName&&"STYLE"!==t.nodeName){var h=t.childNodes[0],a=this.getSelectMarkdown(h,e,0,i,o),l=a.markdown;return r.markdown=l,r}if("#text"===t.nodeName){var u=t,c=[],f=t===e?i:t.textContent.length,d=t.textContent.substring(n,f).replace(/(^\s*)|(\s*$)/g,"");0!==o.length&&u.parentNode===o[o.length-1].node&&(s=d);var g=!1;while(!g&&(0===o.length||u.parentNode!==o[o.length-1].node)){u===this.container&&(g=!0);var p="";"#text"===u.nodeName&&(p=d),u=u.parentNode,c.push({node:u,text:p})}while(0!==c.length)o.push(c.pop())}if("IMG"===t.nodeName&&(o.length>0?o[o.length-1].text+=this.wrapMarkdown(t,this.options):r.markdown+=this.wrapMarkdown(t,this.options)),t===e){if(0!==o.length){var v=o.pop();v.text+=s,r.markdown=this.wrapMarkdown(v.node,this.options,v.text),0!==o.length&&(o[o.length-1].text+=r.markdown)}while(0!==o.length){var y=o.pop();r.markdown=this.wrapMarkdown(y.node,this.options,y.text),0!==o.length&&(o[o.length-1].text+=r.markdown)}return r}var m=t.nextSibling;if(m){var w=this.getSelectMarkdown(m,e,0,i,o),x=w.markdown;o.length>0?o[o.length-1].text+=x:r.markdown+=x}else{var k=t.parentNode,b=o.pop();b.text+=s,r.markdown+=this.wrapMarkdown(b.node,this.options,b.text),0!==o.length&&(o[o.length-1].text+=r.markdown);while(k&&null===k.nextSibling)k=k.parentNode,b=o.pop(),b.text+=s,r.markdown=this.wrapMarkdown(b.node,this.options,b.text),0!==o.length&&(o[o.length-1].text+=r.markdown);if(!k)throw new Error("Invalid end node");var E=this.getSelectMarkdown(k.nextSibling,e,0,i,o),T=E.markdown;0!==o.length?o[o.length-1].text+=T:r.markdown=T}return r}}],[{key:"wrapMarkdown",value:function(t,e,n){if("IMG"===t.nodeName){var i={alt:t.alt,src:t.src,width:t.width,height:t.height};return e[t.nodeName]?e[t.nodeName](i):""}if("LI"===t.nodeName){var o=1,r=t.parentNode;while(r.parentNode)r=r.parentNode,r.nodeName===t.parentNode.nodeName&&o++;var s=!1;hi(t.childNodes).some((function(t){return"UL"===t.nodeName||"OL"===t.nodeName}))&&(s=!0);var h=!1;t.nextElementSibling||(h=!0);var a={type:t.parentNode.nodeName,isLastOne:h,itemLevel:o,hasChild:s,index:[].indexOf.call(t.parentNode.children,t)+1};return e[t.nodeName]?e[t.nodeName](n,a):n}if("UL"===t.nodeName||"OL"===t.nodeName){var l=1,u=t.parentNode;while(u.parentNode)u=u.parentNode,u.nodeName===t.nodeName&&l++;return e[t.nodeName]?e[t.nodeName](n,{listLevel:l}):n}return e[t.nodeName]?e[t.nodeName](n):n}}]),t}(),lo={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_MOVE_THROTTLE:"touchmovethrottle",TOUCH_END:"touchend",TAP:"tap",LONG_TAP:"longtap"},uo=function(){function t(e,n){K(this,t),this.disabled=!1,this.options={longTapTime:600,tapTime:500,slideDistance:20,throttleTime:50},this.element=e||window,this.options=Gn(this.options,n),this.touchStartCallbacks=[],this.touchMoveCallbacks=[],this.touchMoveThrottleCallbacks=[],this.touchEndCallbacks=[],this.tapCallbacks=[],this.longTapCallbacks=[],this.hook=function(){return!0},this.touchStartPosition={x:0,y:0},this.longTapTimerHandler=null,this.touchMoveTimerHandler=null,this.touchStartTime=Date.now(),this.lastMoveTime=Date.now(),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.startEventName=li()===Yn.MOBILE?"touchstart":"mousedown",this.moveEventName=li()===Yn.MOBILE?"touchmove":"mousemove",this.endEventName=li()===Yn.MOBILE?"touchend":"mouseup",this.cancelEventName=li()===Yn.MOBILE?"touchcancel":"mouseleave",this.element.addEventListener(this.startEventName,this.onTouchStart),this.element.addEventListener(this.moveEventName,this.onTouchMove,{passive:!1}),this.element.addEventListener(this.endEventName,this.onTouchEnd),this.element.addEventListener(this.cancelEventName,this.onTouchEnd)}return X(t,[{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"registerEvent",value:function(t,e){if("function"===typeof e)switch(t){case lo.TOUCH_START:this.touchStartCallbacks.push(e);break;case lo.TOUCH_MOVE:this.touchMoveCallbacks.push(e);break;case lo.TOUCH_MOVE_THROTTLE:this.touchMoveThrottleCallbacks.push(e);break;case lo.TOUCH_END:this.touchEndCallbacks.push(e);break;case lo.TAP:this.tapCallbacks.push(e);break;case lo.LONG_TAP:this.longTapCallbacks.push(e);break;default:break}}},{key:"registerHook",value:function(t){this.hook=t}},{key:"onTouchStart",value:function(t){var e=this;this.disabled||t.touches&&t.touches.length>1||this.hook("touchstart",t)&&(this.touchStartCallbacks.forEach((function(e){return e(t)})),this.longTapTimerHandler=setTimeout((function(){e.onLongTap(t)}),this.options.longTapTime),this.touchStartPosition=Zn(t),this.touchStartTime=Date.now())}},{key:"onTouchMove",value:function(t){var e=this;if(!this.disabled&&!(t.touches&&t.touches.length>1)&&this.hook("touchmove",t)){this.touchMoveCallbacks.forEach((function(e){return e(t)})),clearTimeout(this.touchMoveTimerHandler),this.touchMoveTimerHandler=setTimeout((function(){e.onTouchMoveThrottle(t)}),this.options.throttleTime),Date.now()-this.lastMoveTime>this.options.throttleTime&&(this.lastMoveTime=Date.now(),this.onTouchMoveThrottle(t));var n=Zn(t),i=ti(n,this.touchStartPosition);i>this.options.slideDistance&&(clearTimeout(this.longTapTimerHandler),this.longTapTimerHandler=null)}}},{key:"onTouchEnd",value:function(t){if(!this.disabled&&!(t.touches&&t.touches.length>1)&&this.hook("touchmove",t)&&(this.touchEndCallbacks.forEach((function(e){return e(t)})),clearTimeout(this.longTapTimerHandler),this.longTapTimerHandler=null,Date.now()-this.touchStartTime<this.options.tapTime)){var e=Zn(t),n=ti(e,this.touchStartPosition);if(n<this.options.slideDistance){t.preventDefault();var i=this.constructor.createMouseEvent("click",t);this.onTap(t),t.target.dispatchEvent(i)}}}},{key:"onTouchMoveThrottle",value:function(t){this.touchMoveThrottleCallbacks.forEach((function(e){return e(t)}))}},{key:"onTap",value:function(t){this.disabled||this.hook("tap",t)&&this.tapCallbacks.forEach((function(e){return e(t)}))}},{key:"onLongTap",value:function(t){this.disabled||this.longTapCallbacks.forEach((function(e){return e(t)}))}},{key:"destroy",value:function(){this.element.removeEventListener(this.startEventName,this.onTouchStart),this.element.removeEventListener(this.moveEventName,this.onTouchMove),this.element.removeEventListener(this.endEventName,this.onTouchEnd),this.element.removeEventListener(this.cancelEventName,this.onTouchEnd)}}],[{key:"createMouseEvent",value:function(t,e){var n=ui(e),i=new MouseEvent(t);return i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,i}}]),t}(),co={disableSelect:!1,menuItems:[],menuTopOffset:0,isMultiColumnLayout:!1,cursor:{same:!1},scrollOffsetBottom:100,scrollSpeedLevel:4,adjustTextStyleDisabled:!1},fo=function(t){return t.preventDefault()},go=function(){},po=function(){function t(e){K(this,t),this.options=Gn({},co,e),this.$selectStatus=Kn.NONE,this.windowHeight=null,this.container=null,this.scrollContainer=null,this.excludeElements=[],this.includeElements=[],this.highlight=null,this.movingCursor=null,this.touchEvent=null,this.scrollInterval=null,this.cursor={start:null,end:null},this.mask=null,this.menu=null,this.scrollOffsetBottom=null,this.scrollSpeedLevel=null,this.containerScroll=null,this.deviceType=li(),this.selectStatusChangeHandler=function(){},this.menuOnClick=function(){},this.highlightLineClick=null}return X(t,[{key:"create",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.container=t,this.adjustTextStyle(),this.container.oncontextmenu=function(t){t.returnValue=!1},this.windowHeight=document.documentElement.clientHeight,i.constructor===Object?(this.excludeElements=i.excludeElements?[].concat(Hn(i.excludeElements)):[],this.includeElements=i.includeElements?[].concat(Hn(i.includeElements)):[t]):(this.excludeElements=[].concat(Hn(i)),this.includeElements=[t]),this.scrollContainer=e||document.body,this.container.addEventListener("contextmenu",fo),go=function(t){return n.copyListener(t)},document.addEventListener("copy",go),this.scrollContainer===document.body?this.scrollContainer.onscroll=this.handleScroll.bind(this):(this.containerScroll=function(){n.handleScroll()},this.scrollContainer.addEventListener("scroll",this.containerScroll)),this.container.style.userSelect="none",this.container.style.webkitUserSelect="none",this.container.style.position="relative",this.touchEvent=new uo(this.container),this.options.disableSelect||(this.touchEvent.registerEvent(lo.TOUCH_START,this.handleTouchStart.bind(this)),this.touchEvent.registerEvent(lo.TOUCH_MOVE,this.handleTouchMove.bind(this)),this.touchEvent.registerEvent(lo.TOUCH_MOVE_THROTTLE,this.handleTouchMoveThrottle.bind(this)),this.touchEvent.registerEvent(lo.TOUCH_END,this.handleTouchEnd.bind(this)),this.touchEvent.registerEvent(lo.LONG_TAP,this.handleLongTap.bind(this))),this.touchEvent.registerEvent(lo.TAP,this.handleTap.bind(this));var o=this.options.cursor&&this.options.cursor.Cursor?this.options.cursor.Cursor:pi;this.options.cursor.same?this.cursor.start=new o(this.container,di.END,Gn({mode:this.mode},this.options.cursor||{})):this.cursor.start=new o(this.container,di.START,Gn({mode:this.mode},this.options.cursor||{})),this.cursor.end=new o(this.container,di.END,this.options.cursor||{}),this.movingCursor=this.cursor.end,this.mask=new eo(this.container,Gn({mode:this.mode},this.options.mask||{})),this.highlight=new no(this.container,Gn({mode:this.mode},this.options.highlight||{})),this.menu=new Ui(this.container,{menuItems:this.options.menuItems,topOffset:this.options.menuTopOffset,style:this.options.menuStyle,isMultiColumnLayout:this.options.isMultiColumnLayout,mode:this.mode}),this.menu.easyMarker=this,this.highlight.easyMarker=this,this.mask.easyMarker=this,this.markdown=new ao(this.container,this.options.markdownOptions),this.scrollOffsetBottom=ei(this.options.scrollOffsetBottom),this.scrollSpeedLevel=this.options.scrollSpeedLevel}},{key:"disable",value:function(){this.touchEvent.disable()}},{key:"enable",value:function(){this.touchEvent.enable()}},{key:"highlightLine",value:function(t,e,n){this.highlight.highlightLine(t,e,n)}},{key:"highlightLines",value:function(t){this.highlight.highlightLines(t)}},{key:"cancelHighlightLine",value:function(t){this.highlight.cancelHighlightLine(t)}},{key:"onHighlightLineClick",value:function(t){this.highlightLineClick=t}},{key:"onSelectStatusChange",value:function(t){this.selectStatusChangeHandler=t}},{key:"onMenuClick",value:function(t){this.menuOnClick=t}},{key:"registerEventHook",value:function(t){this.touchEvent.registerHook(t)}},{key:"destroy",value:function(){this.container.oncontextmenu=null,this.container.removeEventListener("contextmenu",fo),document.removeEventListener("copy",go),null!==this.containerScroll&&(this.scrollContainer.removeEventListener("scroll",this.containerScroll),this.containerScroll=null),this.scrollContainer.onscroll=null,this.touchEvent.destroy(),this.cursor.start.destroy(),this.cursor.end.destroy(),this.mask.destroy(),this.highlight.destroy(),this.menu.destroy(),this.$selectStatus=Kn.NONE,this.container=null,this.scrollContainer=null,this.excludeElements=[],this.highlight=null,this.movingCursor=null,this.touchEvent=null,this.cursor={start:null,end:null},this.mask=null,this.menu=null,this.windowHeight=null,this.includeElements=[],this.scrollInterval=null,this.scrollOffsetBottom=null,this.scrollSpeedLevel=null,this.selectStatusChangeHandler=function(){},this.menuOnClick=function(){},this.highlightLineClick=null}},{key:"reset",value:function(){this.selectStatus=Kn.NONE,this.cursor.start.hide(),this.cursor.end.hide(),this.mask.reset(),this.menu.hide()}},{key:"adjustTextStyle",value:function(){if(!this.options.adjustTextStyleDisabled)for(var t=this.container.children,e=0;e<t.length;e++)t[e].style.zIndex="40",t[e].style.position="relative"}},{key:"isContains",value:function(t){return-1!==this.includeElements.findIndex((function(e){return e.contains(t)}))&&-1===this.excludeElements.findIndex((function(e){return e.contains(t)}))}},{key:"handleLongTap",value:function(){}},{key:"handleTap",value:function(){}},{key:"copyListener",value:function(){}},{key:"handleTouchStart",value:function(t){if(this.selectStatus===Kn.FINISH&&this.menu.isShow&&this.menu.type!==Jn.HIGHLIGHT){var e=this.getTouchRelativePosition(t),n=this.cursor.start.inRegion(e),i=this.cursor.end.inRegion(e);n.inRegion&&i.inRegion?(this.selectStatus=Kn.SELECTING,this.movingCursor=n.distance<i.distance?this.cursor.start:this.cursor.end):i.inRegion?(this.selectStatus=Kn.SELECTING,this.movingCursor=this.cursor.end):n.inRegion&&(this.selectStatus=Kn.SELECTING,this.movingCursor=this.cursor.start)}}},{key:"handleTouchMove",value:function(t){this.selectStatus===Kn.SELECTING&&t.preventDefault()}},{key:"handleTouchMoveThrottle",value:function(t){var e=this;if(this.selectStatus===Kn.SELECTING){var n=this.deviceType===Yn.MOBILE?this.movingCursor.height/2:0,i=this.movingCursor.offset||{x:0,y:-n},o=ui(t),r=t.clientY||o.clientY;if(r>=this.windowHeight-this.scrollOffsetBottom){null!==this.scrollInterval&&clearInterval(this.scrollInterval);var s=(r-this.windowHeight+this.scrollOffsetBottom)*this.scrollSpeedLevel/this.scrollOffsetBottom;this.scrollInterval=setInterval((function(){e.scrollContainer.scrollTop+=s,document.documentElement.scrollTop+=s}),1)}else clearInterval(this.scrollInterval);var h=Zn(t,i),a=h.x,l=h.y,u=document.elementFromPoint(a,l);this.isContains(u)&&this.moveCursor(u,a,l)}}},{key:"handleTouchEnd",value:function(){this.selectStatus===Kn.SELECTING&&this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null)}},{key:"handleScroll",value:function(){this.selectStatus===Kn.FINISH&&this.menu.handleScroll()}},{key:"showHighlightMenu",value:function(t,e){this.setSelection(t),this.selectStatus=Kn.FINISH,this.menu.setPosition(this.start,this.end),this.menu.type=Jn.HIGHLIGHT,this.menu.options=e,this.menu.show()}},{key:"setSelection",value:function(){}},{key:"getTouchRelativePosition",value:function(t){var e=this.deviceType===Yn.MOBILE?this.movingCursor.height/2:0,n={x:0,y:-e},i=Zn(t,n);return i.x-=this.screenRelativeOffset.x,i.y-=this.screenRelativeOffset.y,i}},{key:"selectStatus",get:function(){return this.$selectStatus},set:function(t){t!==this.$selectStatus&&this.selectStatusChangeHandler(t),this.$selectStatus=t,t===Kn.FINISH?(this.menu.setPosition(this.start,this.end),this.menu.type=Jn.SELECT,this.menu.show()):this.menu.hide()}},{key:"screenRelativeOffset",get:function(){var t=this.container.getBoundingClientRect(),e=t.top,n=t.left;return{x:n,y:e}}}],[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=new this;return i.create(t,e,n),i}}]),t}(),vo=function(t){function e(t){K(this,e);var n=en(this,(e.__proto__||U(e)).call(this,t));return n.textNode={start:null,end:null},n.markdown=null,n.mode=$n.NODE,n.touchStartTime=0,n}return yn(e,t),X(e,[{key:"getSelectText",value:function(){var t=zi.getSelectText(this.textNode.start,this.textNode.end)||"";return ai(this.container.innerText,t)||t}},{key:"getSelectMarkdown",value:function(){return this.markdown.getSelectMarkdown(this.textNode.start.node,this.textNode.end.node,this.textNode.start.offset,this.textNode.end.offset).markdown||""}},{key:"swapCursor",value:function(t,e){var n=e.x,i=e.y;if(this.movingCursor===this.cursor.start){var o=this.cursor.end.position;i>o.y||i===o.y&&n>=o.x?(this.cursor.start.position=this.cursor.end.position,this.movingCursor=this.cursor.end,this.textNode.start=new zi(this.textNode.end.node,this.textNode.end.offset),this.textNode.end=new zi(t.node,t.index)):this.textNode.start=new zi(t.node,t.index)}else{var r=this.cursor.start.position;i<r.y||i===r.y&&n<=r.x?(this.cursor.end.position=this.cursor.start.position,this.movingCursor=this.cursor.start,this.textNode.end=new zi(this.textNode.start.node,this.textNode.start.offset),this.textNode.start=new zi(t.node,t.index)):this.textNode.end=new zi(t.node,t.index)}}},{key:"selectWords",value:function(t,e,n){var i=["。”","？”","！”","。","？","！"],o=Xn(t,e,n,i)||{},r=o.rects,s=o.node,h=o.index,a=o.wordsLength;if(r&&(!r||0!==r.length)){var l=r[0],u=r[r.length-1],c=l.left-this.screenRelativeOffset.x,f=l.top-this.screenRelativeOffset.y;this.textNode.start=new zi(s,h),this.cursor.start.height=l.height,this.cursor.start.position={x:c,y:f};var d=u.left-this.screenRelativeOffset.x,g=u.top-this.screenRelativeOffset.y;this.textNode.end=new zi(s,h+a),this.cursor.end.height=u.height,this.cursor.end.position={x:d+u.width,y:g},this.cursor.start.show(),this.cursor.end.show(),this.renderMask(),this.selectStatus=Kn.FINISH}}},{key:"renderMask",value:function(){this.mask.render(this.textNode.start,this.textNode.end)}},{key:"moveCursor",value:function(t,e,n){var i=Qn(t,e,n,this.movingCursor===this.cursor.start);if(null!==i){var o=i.x-this.screenRelativeOffset.x,r=i.y-this.screenRelativeOffset.y,s=this.movingCursor===this.cursor.start?this.cursor.end:this.cursor.start;s.position.x===o&&s.position.y===r||(this.swapCursor(i,{x:o,y:r}),this.movingCursor.height=i.height,this.movingCursor.position={x:o,y:r},this.cursor.start.show(),this.cursor.end.show(),this.renderMask())}}},{key:"handleTouchStart",value:function(t){if(an(e.prototype.__proto__||U(e.prototype),"handleTouchStart",this).call(this,t),this.deviceType===Yn.PC){if(this.selectStatus===Kn.FINISH){var n=this.menu.inRegion(t),i=this.getTouchRelativePosition(t),o=this.cursor.start.inRegion(i),r=this.cursor.end.inRegion(i);n||o.inRegion||r.inRegion||this.reset()}if(this.selectStatus===Kn.NONE&&this.isContains(t.target)){this.touchStartTime=Date.now();var s=Zn(t),h=s.x,a=s.y,l=document.elementFromPoint(h,a),u=Qn(l,h,a,this.movingCursor!==this.cursor.start);if(u&&(this.textNode.start=new zi(u.node,u.index),this.textNode.start)){var c=u.x-this.screenRelativeOffset.x,f=u.y-this.screenRelativeOffset.y;this.cursor.start.height=u.height,this.cursor.start.position={x:c,y:f}}}}}},{key:"handleTouchMoveThrottle",value:function(t){if(this.deviceType===Yn.PC&&this.selectStatus===Kn.NONE&&this.textNode.start&&!this.textNode.end){if(Date.now()-this.touchStartTime<100)return;var n=Zn(t),i=n.x,o=n.y,r=document.elementFromPoint(i,o),s=Qn(r,i,o,this.movingCursor===this.cursor.start);if(s&&(this.textNode.end=new zi(s.node,s.index),this.textNode.end)){var h=s.x-this.screenRelativeOffset.x,a=s.y-this.screenRelativeOffset.y;this.cursor.end.height=s.height,this.cursor.end.position={x:h,y:a},this.selectStatus=Kn.SELECTING}}an(e.prototype.__proto__||U(e.prototype),"handleTouchMoveThrottle",this).call(this,t)}},{key:"copyListener",value:function(t){this.selectStatus===Kn.FINISH&&(this.menu.copyListener({start:this.textNode.start,end:this.textNode.end,content:this.getSelectText(),markdown:this.getSelectMarkdown()},t),this.reset())}},{key:"handleTap",value:function(t){if(this.selectStatus===Kn.FINISH){this.menu.handleTap(t,{start:this.textNode.start,end:this.textNode.end,content:this.getSelectText(),markdown:this.getSelectMarkdown()});var e=this.getTouchRelativePosition(t),n=this.cursor.start.inRegion(e),i=this.cursor.end.inRegion(e);if(n.inRegion||i.inRegion)return;this.reset()}else if(this.selectStatus===Kn.NONE){var o=this.highlight.handleTap(t);if(!o&&!this.options.disableTapHighlight&&!this.options.disableSelect&&this.isContains(t.target)&&this.deviceType===Yn.MOBILE){var r=Zn(t),s=r.x,h=r.y;this.selectWords(t.target,s,h)}}}},{key:"handleLongTap",value:function(t){if(this.deviceType===Yn.MOBILE&&this.isContains(t.target)){var e=Zn(t),n=e.x,i=e.y;this.selectWords(t.target,n,i)}}},{key:"handleTouchEnd",value:function(t){an(e.prototype.__proto__||U(e.prototype),"handleTouchEnd",this).call(this,t),this.selectStatus===Kn.SELECTING&&(this.selectStatus=Kn.FINISH),this.deviceType===Yn.PC&&this.selectStatus===Kn.NONE&&this.reset()}},{key:"setSelection",value:function(t){this.textNode.start=new zi(t.anchorNode,t.anchorOffset),this.textNode.end=new zi(t.focusNode,t.focusOffset)}},{key:"destroy",value:function(){an(e.prototype.__proto__||U(e.prototype),"destroy",this).call(this),this.textNode={start:null,end:null},this.markdown=null,this.mode=$n.NODE}},{key:"reset",value:function(){an(e.prototype.__proto__||U(e.prototype),"reset",this).call(this),this.textNode={start:null,end:null}}},{key:"start",get:function(){return this.textNode.start}},{key:"end",get:function(){return this.textNode.end}}]),e}(po),yo=function(){function t(e){K(this,t),this.originalRegionList=e,this.regions=[],this.initRectRegion()}return X(t,[{key:"initRectRegion",value:function(){this.regions=t.getLineRectRegionList(this.originalRegionList)}},{key:"setRegions",value:function(e){var n=t.getLineRectRegionList(e);this.originalRegionList=e,this.regions=n}},{key:"getSentenceByPosition",value:function(t){var e=void 0,n=void 0,i=this.getRegionByPoint(t),o=["。”","？”","！”","。","？","！"],r=o.reduce((function(t,e){return""===e?t:""===t?"\\"+e:t+"|\\"+e}),""),s=new RegExp("("+r+")"),h=i;while(!n){var a=this.getNextRegion(h);null===a?n=h:s.test(a.text)?n=a:h=a}var l=i;while(!e){var u=this.getPreviousRegion(l);null===u||s.test(u.text)?e=l:l=u}return{start:e,end:n}}},{key:"getText",value:function(t,e){var n=t.originalIndex,i=e.originalIndex,o=this.originalRegionList.slice(n,i+1),r="";return o.forEach((function(t){r+=t.text})),r}},{key:"getRects",value:function(e,n){var i=e.pageIndex,o=n.pageIndex,r=e.lineIndex,s=n.lineIndex,h=e.columnIndex,a=n.columnIndex,l=[];if(r===s&&i===o){var u=this.regions[i].regions[r];return l.push(new DOMRect(e.left,u.top,n.left+n.width-e.left,u.height)),l}if(i===o){var c=this.regions[i].regions.slice(r,s+1);l.push.apply(l,Hn(t.getRectsByRegions(c,h,a)))}else for(var f=i;f<=o;f++)if(f===i){var d=this.regions[f].regions.slice(r);l.push.apply(l,Hn(t.getRectsByRegions(d,h,null)))}else if(f===o){var g=this.regions[f].regions.slice(0,s+1);l.push.apply(l,Hn(t.getRectsByRegions(g,null,a)))}else{var p=this.regions[f].regions;l.push.apply(l,Hn(t.getRectsByRegions(p,null,null)))}return l}},{key:"getRegionByPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={top:t.y,left:t.x};if(this.regions.length<=0)return null;var i=ci(this.regions,n,"left",e);if(-1===i)return null;var o=this.regions[i].regions,r=ci(o,n,"top",e);if(-1===r)return null;var s=o[r],h=ci(s.regions,n,"left",e);return-1===h?null:s.regions[h]}},{key:"getLineInfoByRegion",value:function(t){var e=t.pageIndex,n=t.lineIndex,i=this.regions[e].regions[n],o=i.top,r=i.left,s=i.height,h=i.width;return{top:o,left:r,height:s,width:h}}},{key:"getPreviousRegion",value:function(t){var e=t.lineIndex,n=t.columnIndex,i=t.pageIndex,o=void 0;if(0===n){if(0!==e){var r=this.regions[i].regions[e-1];r&&(o=r.regions[r.regions.length-1])}else if(0!==i){var s=this.regions[i-1].regions[this.regions[i-1].region.length-1];s&&(o=s.regions[s.regions.length-1])}}else o=this.regions[i].regions[e].regions[n-1];return o||null}},{key:"getNextRegion",value:function(t){var e=t.lineIndex,n=t.columnIndex,i=t.pageIndex,o=void 0,r=this.regions[i].regions[e];if(r)if(n===r.regions.length-1){var s=this.regions[i].regions[e+1];if(s){var h=Zi(s.regions,1);o=h[0]}else if(this.regions[i+1]){var a=Zi(this.regions[i+1].regions[0].regions,1);o=a[0]}}else o=r.regions[n+1];return o||null}},{key:"destroy",value:function(){this.originalRegionList=[],this.regions=[]}}],[{key:"getLineRectRegionList",value:function(e){var n=[],i={page:0,top:0,right:0,left:0,width:0,height:0,regions:[]},o={top:0,bottom:0,left:0,width:0,height:0,regions:[]},r=0,s=0,h=0;return e.forEach((function(a,l){var u=a.top,c=a.height,f=a.left,d=a.page,g=a.width;if(0===o.regions.length)i.page=a.page,i.top=u,i.right=f+g,i.left=f,i.width=g,o.top=u,o.bottom=u+c,o.left=f,o.height=c,o.page=d,o.regions.push(Gn({originalIndex:l,lineIndex:r,columnIndex:s,pageIndex:h},a));else if(i.page===a.page&&t.isSameLine({top:o.top,height:o.bottom-o.top},a))s++,o.regions.push(Gn({originalIndex:l,lineIndex:r,columnIndex:s,pageIndex:h},a)),o.top=Math.min(o.top,u),o.bottom=Math.max(o.bottom,u+c),o.height=Math.max(o.height,o.bottom-o.top);else if(i.page===a.page){r++,s=0;var p=o.regions[o.regions.length-1],v=p.width,y=p.left;o.width=y+v-o.left,i.regions.push(Gn({},o)),i.top=Math.min(i.top,o.top),i.left=Math.min(i.left,o.left),i.right=Math.max(i.right,o.left+o.width),i.width=Math.max(i.width,i.right-o.left),o.top=u,o.bottom=u+c,o.left=f,o.height=c,o.page=d,o.regions=[],o.regions.push(Gn({originalIndex:l,lineIndex:r,columnIndex:s,pageIndex:h},a))}else{var m=o.regions[o.regions.length-1],w=m.width,x=m.left;o.width=x+w-o.left,i.regions.push(Gn({},o));var k=i.regions[i.regions.length-1],b=k.top,E=k.height;i.height=b+E-i.top,n.push(Gn({},i)),h++,r=0,s=0,i.page=a.page,i.top=u,i.right=f+g,i.left=f,i.width=g,i.regions=[],o.top=u,o.bottom=u+c,o.left=f,o.height=c,o.page=d,o.regions=[],o.regions.push(Gn({originalIndex:l,lineIndex:r,columnIndex:s,pageIndex:h},a))}if(l===e.length-1){var T=o.regions[o.regions.length-1],S=T.width,N=T.left;o.width=N+S-o.left,i.regions.push(Gn({},o));var O=i.regions[i.regions.length-1],R=O.top,M=O.height;i.height=R+M-i.top,n.push(Gn({},i))}})),n}},{key:"getRectsByRegions",value:function(t,e,n){var i=[];return t.forEach((function(o,r){if(0===r&&null!==e){var s=o.regions[e];i.push(new DOMRect(s.left,o.top,o.width-s.left+o.left,o.height))}else if(r===t.length-1&&null!==n){var h=o.regions[n];i.push(new DOMRect(o.left,o.top,h.left+h.width-o.left,o.height))}else i.push(new DOMRect(o.left,o.top,o.width,o.height))})),i}},{key:"pointInRect",value:function(t,e,n){return t.x>e.x&&t.x<=n.x&&t.y>e.y&&t.y<=n.y}},{key:"isSameLine",value:function(t,e){return(t.top-(e.top+e.height))*(e.top-(t.top+t.height))>0}}]),t}(),mo=(function(t){function e(t){K(this,e);var n=en(this,(e.__proto__||U(e)).call(this,t));return n.selectRegion={start:null,end:null},n.region=new yo(t.regions||[]),n.mode=$n.REGION,n.touchStartTime=0,n}yn(e,t),X(e,[{key:"setRegions",value:function(t){this.region.setRegions(t)}},{key:"getSelectText",value:function(){var t=this.region.getText(this.selectRegion.start,this.selectRegion.end)||"";return t}},{key:"handleTouchStart",value:function(t){if(an(e.prototype.__proto__||U(e.prototype),"handleTouchStart",this).call(this,t),this.deviceType===Yn.PC){if(this.selectStatus===Kn.FINISH){var n=this.menu.inRegion(t),i=this.getTouchRelativePosition(t),o=this.cursor.start.inRegion(i),r=this.cursor.end.inRegion(i);n||o.inRegion||r.inRegion||this.reset()}if(this.selectStatus===Kn.NONE&&this.isContains(t.target)){this.touchStartTime=Date.now();var s=this.getTouchRelativePosition(t);if(this.selectRegion.start=this.region.getRegionByPoint(s,!0),this.selectRegion.start){var h=this.region.getLineInfoByRegion(this.selectRegion.start),a=h.height;this.cursor.start.height=a,this.cursor.start.position={x:this.selectRegion.start.left,y:this.selectRegion.start.top}}}}}},{key:"handleTouchMoveThrottle",value:function(t){if(this.deviceType===Yn.PC&&this.selectStatus===Kn.NONE&&this.selectRegion.start&&!this.selectRegion.end){if(Date.now()-this.touchStartTime<100)return;var n=this.getTouchRelativePosition(t);if(this.selectRegion.end=this.region.getRegionByPoint(n),this.selectRegion.end){var i=this.region.getLineInfoByRegion(this.selectRegion.end),o=i.height;this.cursor.end.height=o,this.cursor.end.position={x:this.selectRegion.end.left+this.selectRegion.end.width,y:this.selectRegion.end.top},this.selectStatus=Kn.SELECTING}}an(e.prototype.__proto__||U(e.prototype),"handleTouchMoveThrottle",this).call(this,t)}},{key:"handleTouchEnd",value:function(t){an(e.prototype.__proto__||U(e.prototype),"handleTouchEnd",this).call(this,t),this.selectStatus===Kn.SELECTING&&(this.selectStatus=Kn.FINISH),this.deviceType===Yn.PC&&this.selectStatus===Kn.NONE&&this.reset()}},{key:"copyListener",value:function(t){this.selectStatus===Kn.FINISH&&(this.menu.copyListener({start:this.selectRegion.start,end:this.selectRegion.end,content:this.getSelectText(),markdown:e.getSelectMarkdown()},t),this.reset())}},{key:"handleTap",value:function(t){if(this.selectStatus===Kn.FINISH){this.menu.handleTap(t,{start:this.selectRegion.start,end:this.selectRegion.end,content:this.getSelectText(),markdown:e.getSelectMarkdown()});var n=this.getTouchRelativePosition(t),i=this.cursor.start.inRegion(n),o=this.cursor.end.inRegion(n);if(i.inRegion||o.inRegion)return;this.reset()}else if(this.selectStatus===Kn.NONE){var r=this.highlight.handleTap(t);if(!r&&!this.options.disableTapHighlight&&!this.options.disableSelect&&this.isContains(t.target)&&this.deviceType===Yn.MOBILE){var s=this.getTouchRelativePosition(t);this.selectThisSentence(s)}}}},{key:"handleLongTap",value:function(t){if(this.deviceType===Yn.MOBILE&&this.isContains(t.target)){var e=this.getTouchRelativePosition(t);this.selectThisSentence(e)}}},{key:"selectThisSentence",value:function(t){var e=this.region.getSentenceByPosition(t),n=e.start,i=e.end;this.selectRegion={start:n,end:i},this.cursor.start.height=this.region.getLineInfoByRegion(this.selectRegion.start).height,this.cursor.start.position={x:this.selectRegion.start.left,y:this.selectRegion.start.top},this.cursor.end.height=this.region.getLineInfoByRegion(this.selectRegion.end).height,this.cursor.end.position={x:this.selectRegion.end.left+this.selectRegion.end.width,y:this.selectRegion.end.top},this.cursor.start.show(),this.cursor.end.show(),this.renderMask(),this.selectStatus=Kn.FINISH}},{key:"moveCursor",value:function(t,e,n){var i=e-this.screenRelativeOffset.x,o=n-this.screenRelativeOffset.y,r=this.region.getRegionByPoint({x:i,y:o});if(r){var s=this.movingCursor===this.cursor.start?this.cursor.end:this.cursor.start;if(s.position.x!==i||s.position.y!==o){this.swapCursor(r,{x:i,y:o});var h=this.region.getLineInfoByRegion(r),a=h.height;this.movingCursor===this.cursor.start?(this.movingCursor.height=a,this.movingCursor.position={x:r.left,y:r.top}):(this.movingCursor.height=a,this.movingCursor.position={x:r.left+r.width,y:r.top}),this.cursor.start.show(),this.cursor.end.show(),this.renderMask()}}}},{key:"swapCursor",value:function(t){this.movingCursor===this.cursor.start?t.originalIndex>this.selectRegion.end.originalIndex?(this.cursor.start.position=this.cursor.end.position,this.movingCursor=this.cursor.end,this.selectRegion.start=this.region.getNextRegion(this.selectRegion.end),this.selectRegion.end=t):this.selectRegion.start=t:t.originalIndex<this.selectRegion.start.originalIndex?(this.cursor.end.position=this.cursor.start.position,this.movingCursor=this.cursor.start,this.selectRegion.end=this.region.getPreviousRegion(this.selectRegion.start),this.selectRegion.start=t):this.selectRegion.end=t}},{key:"renderMask",value:function(){this.mask.render(this.selectRegion.start,this.selectRegion.end)}},{key:"setSelection",value:function(t){this.selectRegion.start=t.start,this.selectRegion.end=t.end}},{key:"reset",value:function(){an(e.prototype.__proto__||U(e.prototype),"reset",this).call(this),this.selectRegion={start:null,end:null}}},{key:"destroy",value:function(){an(e.prototype.__proto__||U(e.prototype),"destroy",this).call(this),this.selectRegion={start:null,end:null},this.region.destroy(),this.region=null,this.mode=$n.REGION,this.touchStartTime=0}},{key:"start",get:function(){return this.selectRegion.start}},{key:"end",get:function(){return this.selectRegion.end}}],[{key:"getSelectMarkdown",value:function(){return"Markdown is not supported in current mode."}}])}(po),vo);const wo={class:"button-wrapper"};var xo=Object(i["defineComponent"])({__name:"Index",setup(t){const e=[{text:"划线笔记",id:1},{text:"分享",style:{backgroundColor:"#407ff2",paddingLeft:"0.5rem"},id:2},{text:"复制",id:3}],n=new mo({menuTopOffset:"2rem",menuItems:e});return Object(i["onMounted"])(()=>{const t=document.querySelector(".easy-marker");n.create(t)}),(t,e)=>{const n=Object(i["resolveComponent"])("j-button"),o=Object(i["resolveComponent"])("el-button");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[e[3]||(e[3]=Object(i["createElementVNode"])("div",{class:"easy-marker"}," Welcome to my blog! you can select the text and click the menu to do something. ",-1)),Object(i["createElementVNode"])("div",wo,[Object(i["createVNode"])(n,{hoverType:"fill",type:"warning",plain:""},{default:Object(i["withCtx"])(()=>e[0]||(e[0]=[Object(i["createTextVNode"])("JButton fill warning plain")])),_:1}),Object(i["createVNode"])(n,{msg:"install button"},{default:Object(i["withCtx"])(()=>e[1]||(e[1]=[Object(i["createTextVNode"])("Jbutton install button")])),_:1}),Object(i["createVNode"])(o,null,{default:Object(i["withCtx"])(()=>e[2]||(e[2]=[Object(i["createTextVNode"])("ElButton")])),_:1})]),e[4]||(e[4]=Object(i["createElementVNode"])("h3",null,"Tool websit",-1)),e[5]||(e[5]=Object(i["createElementVNode"])("ul",null,[Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("a",{href:"https://www.ilovepdf.com/zh-cn",target:"_blank"},"PDF")]),Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("a",{href:"https://lab.magiconch.com/",target:"_blank"},"一个有趣的博客")]),Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("a",{href:"https://lishaoy.net/",target:"_blank"},"好看的个人博客")])],-1))],64)}}}),ko=(n("60e2"),n("6b0d")),bo=n.n(ko);const Eo=bo()(xo,[["__scopeId","data-v-3b21cc05"]]);e["default"]=Eo},d65c:function(t,e,n){}}]);